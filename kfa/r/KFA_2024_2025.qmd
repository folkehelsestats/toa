---
title: "KFA 2024_2025"
format: html
editor: visual
---

# KFA 2024_2025

# Importer fil og rydd

```{r}
#| include: false
#| output: false
#| message: false

library(haven)
library(labelled)
library(readr)

# 1. Les inn sav-fil:
kfa_2024_2025 <- read_sav("O:/Prosjekt/Rusdata/Kommunenes forvaltning/Alkoholloven/Leveranse 2024_2025/Original/Alkohol_v2.sav")

# Lage kodebøker, bruker Yusmans kode: 
library(DT)

source("https://raw.githubusercontent.com/folkehelsestats/rusus/refs/heads/main/fun-codebook.R")

# Lager kodeboka som eksporteres manuelt:
create_codebook(kfa_2024_2025)



# 2. Les inn variabellabels og kategoriske labels
var_labels <- read_csv("O:/Prosjekt/Rusdata/Kommunenes forvaltning/Alkoholloven/Analyser 2024_2025/R/variable_labels.csv")
cat_labels <- read_csv("O:/Prosjekt/Rusdata/Kommunenes forvaltning/Alkoholloven/Analyser 2024_2025/R/corrected_categorical_labels.csv")


# 3. Legg til variabellabels
for (i in 1:nrow(var_labels)) {
  varname <- var_labels[i, 1][[1]]
  label <- var_labels[i, 2][[1]]
  if (varname %in% names(kfa_2024_2025)) {
    var_label(kfa_2024_2025[[varname]]) <- label
  }
}


# 4. Legg til kategoriske labels
for (i in 1:nrow(cat_labels)) {
  varname <- cat_labels$Variable[i]
  if (varname %in% names(data)) {
    values <- cat_labels[i, -1]
    values <- values[!is.na(values)]
    labels <- setNames(as.character(values), as.character(names(values)))
    kfa_2024_2025[[varname]] <- labelled(kfa_2024_2025[[varname]], labels)
  }
}


# Konverter alle labelled variabler til faktor
library(dplyr)
kfa_2024_2025 <- kfa_2024_2025 %>% mutate(across(where(is.labelled), as_factor))


# 5. Sjekk datastruktur
str(kfa_2024_2025)

# 6. Sjekk for duplikater og manglende ID
anyDuplicated(kfa_2024_2025$kommunenummer)
sum(is.na(kfa_2024_2025$kommunenummer))


```

```{r}
#| echo: false
#| message: false
#| output: false

# Kommuner fra tidligere år
# if(!require(pak)) install.packages("pak")
# pak::pkg_install("helseprofil/norgeo")

library(norgeo)

# Henter kommuneendring fra 2023 til 2024, obs på en splitting:
kommendr2324 <- track_change("kommune", from = 2023, to = 2024)

  # Tar ut Haram kommune for å unngå at det er to like oldCode
kommendr2324_clean <- kommendr2324 %>%
  filter(currentCode != 1580) # Fjerner 1507 Haram fordi den ble splittet ut av Ålesund. I orginal-kfa-fil er dette ivaretatt


# 2. Lag en kopi av kommunenummer som 'oldCode' i kfa-fila
kfa_2024_2025 <- kfa_2024_2025 %>%
  mutate(oldCode = kommunenummer)

# 3. Slå sammen og oppdater kommunenummer så det blir korrekt. 
kfa_oppdatert <- kfa_2024_2025 %>%
  left_join(kommendr2324_clean, by = "oldCode") %>%
  mutate(kommunenummer = if_else(!is.na(currentCode), currentCode, kommunenummer))


# Henter kommune-inndeling i 2024 og lagrer som Stata-fil:
kommuner2024 <- get_code("kommune", from = 2024)
kommuner2024 <- kommuner2024[kommuner2024$code != 9999, ]
N <- nrow(kommuner2024)


# Laster inn fjorårets fil, ferdigstilt i Stata som inneholder impurterte antall bevillinger fra tidligere.
kfa_2023_2024 <- read_dta("O:/Prosjekt/Rusdata/Kommunenes forvaltning/Alkoholloven/Analyser 2023_2024/KFA_2023_2024_beh.dta")
names(kfa_2023_2024)
create_codebook(kfa_2023_2024)


# Henter kommune-inndeling i 2023 og lagrer som Stata-fil:
kommuner2023 <- get_code("kommune", from = 2023)
kommuner2023 <- kommuner2023[kommuner2023$code != 9999, ]
N <- nrow(kommuner2023)

    
```

# Datafil 2024_2025, besvarelse

```{r}
#| message: false
#| echo: false
#| output: false

# Antall kommuner som ikke har svart 2024_2025:
sum(is.na(kfa_oppdatert$respid) | trimws(kfa_oppdatert$respid) == "")

# Svarprosent: 
  # Totalantall rader
  total <- nrow(kfa_oppdatert)
  
  # Antall rader der respid er NA eller tom
  uten_respid <- sum(is.na(kfa_oppdatert$respid) | trimws(kfa_oppdatert$respid) == "")
  
  # Antall med gyldig respid
  med_respid <- total - uten_respid
  
  # Prosentandel med gyldig respid
  svarprosent <- (med_respid / total) * 100
  
  # Vis resultatet
  svarprosent

  
  # 
```

Data om kommunenes forvaltning av alkoholloven kommer fra spørreskjema som kommunene besvarer. Kommunene plikter etter anmodning å gi opplysninger om kommunens forvaltning, jf. alkoholforskriften § 7-3.

Totalt antall kommuner i 2024 var `r nrow(kommuner2024)`, mens det var `r nrow(kommuner2023)` i 2023.

N i datafil 2024_2025 er `r nrow(kfa_oppdatert)`. Antall kommuner som ikke har besvart spørreskjemaet er `r sum(is.na(kfa_oppdatert$respid) | trimws(kfa_oppdatert$respid) == "")`. Det gir en svarprosent på `r round(svarprosent, 1)`. Til sammenlikning var svarprosenten i 2023 `r round ((((nrow(kfa_2023_2024))-(sum(is.na(kfa_2023_2024$qintro_2_1_tel) | trimws(kfa_2023_2024$qintro_2_1_tel) == "")))/(nrow(kfa_2023_2024)))*100, 1)`.

Når det gjelder hvem som har svart på undersøkelsen for kommunen så er dette et åpent spørsmål, og gjelder stillingen personen har. Noen velger likevel å oppgi sektortilhørighet. Komplett liste:

```{r}

# Stilling til den som har svart på spørreskjemet i kommuen
table(kfa_oppdatert$qintro_2_1_4)


```

### Bevillinger

```{r}
#| message: false
#| echo: false
#| output: false

# Summerer antall salgsbevillinger tot: 
kfa_oppdatert$tot_salg24 <- rowSums(kfa_oppdatert[, c(
  "q1_1_1", "q1_1_2", "q1_1_3",
  "q1_1_4", "q1_1_5", "q1_1_6", "q1_1_7"
)], na.rm = TRUE)

sum(kfa_oppdatert$tot_salg24, na.rm = TRUE)

  
  # Sikrer at rader/kommuner med NA, forblir slik: 
  vars <- c("q1_1_1", "q1_1_2", "q1_1_3", "q1_1_4", "q1_1_5", "q1_1_6", "q1_1_7")
  
  # Summér med na.rm = TRUE
  kfa_oppdatert$tot_salg24 <- rowSums(kfa_oppdatert[vars], na.rm = TRUE)
  
  # Sett NA der alle er NA
  kfa_oppdatert$tot_salg24[rowSums(!is.na(kfa_oppdatert[vars])) == 0] <- NA


# Hvilke kommuner er missing mtp salgsbevillinger? Må imputere fra 2023.
salg_missing <- kfa_oppdatert$kommune[is.na(kfa_oppdatert$tot_salg24)]
salg_missing
 
oldCode_missing <- kfa_oppdatert$oldCode[is.na(kfa_oppdatert$tot_salg24)]
# OBs på at flere av disse har endret kommunenr fra 2023 til 2024.
  
# Har noen kommuner i 2024, 0 salgbevillinger?
salg_null <- kfa_oppdatert$kommune[kfa_oppdatert$tot_salg24 == 0 &  !is.na(kfa_oppdatert$tot_salg24)]
salg_null

oldCode_0 <- kfa_oppdatert$oldCode[kfa_oppdatert$tot_salg24 == 0]
# OBs på at en av disse har endret kommunenr fra 2023 til 2024.


# Imputerer antall salgsbevillinger fra 2023 for kommuner med missing og 0:

  # Finn indekser for matching mellom oldCode og utvalg_kommunenummer
  match_index <- match(kfa_oppdatert$oldCode, kfa_2023_2024$utvalg_kommunenummer)
  
  # Imputer tot_salg24 med tot_salg23 der tot_salg24 er NA 
  kfa_oppdatert$tot_salg24[is.na(kfa_oppdatert$tot_salg24)] <- 
    kfa_2023_2024$tot_salg23[match_index][is.na(kfa_oppdatert$tot_salg24)]
  
    # Imputer tot_salg24 med tot_salg23 der tot_salg24 er NA eller 0. Har valgt å ikke imputere fjorårets for de med 0 salgsbevillinger.
  # kfa_oppdatert$tot_salg24[is.na(kfa_oppdatert$tot_salg24) | kfa_oppdatert$tot_salg24 == 0] <- 
    # kfa_2023_2024$tot_salg23[match_index][is.na(kfa_oppdatert$tot_salg24) | kfa_oppdatert$tot_salg24 == 0]


# Imputerer tilsvarende for salgsbevillinger knyttet til ulike utsalgssteder:
  
  # Dagligvare
  sum(kfa_oppdatert$q1_1_1, na.rm = TRUE)
  
    # Lager ny variabel, dagligvare:
    kfa_oppdatert$dagligvare24 <- kfa_oppdatert$q1_1_1
     match_index <- match(kfa_oppdatert$oldCode, kfa_2023_2024$utvalg_kommunenummer)
    # Imputerer tall fra 2023 for kommuner som har missing og 0:
    kfa_oppdatert$dagligvare24[is.na(kfa_oppdatert$dagligvare24) # | kfa_oppdatert$dagligvare24 == 0
                               ] <- kfa_2023_2024$dagligvare[match_index][is.na(kfa_oppdatert$dagligvare24) # | kfa_oppdatert$dagligvare24 == 0
                                                                                                                                             ]
    # Sjekker at ingen er missing:
    table(is.na(kfa_oppdatert$dagligvare24))
    # Sjekker antall dagligvare salgsbevillinger:
    sum(kfa_oppdatert$dagligvare24, na.rm = TRUE)
    
  # Bryggeri
  kfa_oppdatert$bryggeri24 <- kfa_oppdatert$q1_1_2
  # Imputerer tall fra 2023 for kommuner som har missing og 0:
    kfa_oppdatert$bryggeri24[is.na(kfa_oppdatert$q1_1_sum) # | kfa_oppdatert$q1_1_sum == 0
                             ] <- kfa_2023_2024$bryggeri[match_index][is.na(kfa_oppdatert$q1_1_sum) #| kfa_oppdatert$q1_1_sum == 0
                                                                      ]
    # Sjekker at ingen er missing:
    table(is.na(kfa_oppdatert$bryggeri24))
    # Sjekker antall bryggeri salgsbevillinger:
    sum(kfa_oppdatert$bryggeri24, na.rm = TRUE)

  
  # Gårdsutsalg
    kfa_oppdatert$gaard24 <- kfa_oppdatert$q1_1_3
  # Imputerer tall fra 2023 for kommuner som har missing og 0:
    kfa_oppdatert$gaard24[is.na(kfa_oppdatert$q1_1_sum) # | kfa_oppdatert$q1_1_sum == 0
                          ] <- kfa_2023_2024$gaard[match_index][is.na(kfa_oppdatert$q1_1_sum) # | kfa_oppdatert$q1_1_sum == 0
                                                                ]
    # Sjekker at ingen er missing:
    table(is.na(kfa_oppdatert$gaard24))
    # Sjekker antall gårdsutsalg salgsbevillinger:
    sum(kfa_oppdatert$gaard24, na.rm = TRUE)
    
  # Nettsalg
    kfa_oppdatert$nettsalg24 <- kfa_oppdatert$q1_1_4
  # Imputerer tall fra 2023 for kommuner som har missing og 0:
    kfa_oppdatert$nettsalg24[is.na(kfa_oppdatert$q1_1_sum) # | kfa_oppdatert$q1_1_sum == 0
                             ] <- kfa_2023_2024$nettsalg[match_index][is.na(kfa_oppdatert$q1_1_sum) # | kfa_oppdatert$q1_1_sum == 0
                                                                      ]
    # Sjekker at ingen er missing:
    table(is.na(kfa_oppdatert$nettsalg24))
    # Sjekker antall gårdsutsalg salgsbevillinger:
    sum(kfa_oppdatert$nettsalg24, na.rm = TRUE)
    

  # Øl- og mineralvannutsalg (nytt av i år, ikke noe å imputere)
   kfa_oppdatert$olutsalg24 <- kfa_oppdatert$q1_1_5
     sum(kfa_oppdatert$olutsalg24, na.rm = TRUE)
     
  # Kultur (nytt av i år, ikke noe å imputere)
     kfa_oppdatert$kultur24 <- kfa_oppdatert$q1_1_6
     sum(kfa_oppdatert$kultur24, na.rm = TRUE)
    
  # Andre
kfa_oppdatert$andre24 <- kfa_oppdatert$q1_1_7
  # Imputerer tall fra 2023 for kommuner som har missing og 0:
    kfa_oppdatert$andre24[is.na(kfa_oppdatert$q1_1_sum) # | kfa_oppdatert$q1_1_sum == 0
                          ] <- kfa_2023_2024$andre[match_index][is.na(kfa_oppdatert$q1_1_sum) # | kfa_oppdatert$q1_1_sum == 0
                                                                ]
    # Sjekker at ingen er missing:
    table(is.na(kfa_oppdatert$andre24))
    # Sjekker antall gårdsutsalg salgsbevillinger:
    sum(kfa_oppdatert$andre24, na.rm = TRUE)
 

# Funksjon med Hdirs farger:
hdir_color <- c("#025169", "#0069E8",
                "#7C145C", "#047FA4",
                "#C68803", "#38A389",
                "#6996CE", "#366558",
                "#BF78DE", "#767676")


library(dplyr)
library(highcharter) 
# Set highcharter options
options(highcharter.theme = hc_theme_smpl(tooltip = list(valueDecimals = 2)))

# Data:
salgsbevillinger <- data.frame(x = c(0, 1, 2, 3, 4, 5, 6),
      y = c((sum(kfa_oppdatert$dagligvare24, na.rm = TRUE)), (sum(kfa_oppdatert$bryggeri24, na.rm = TRUE)), (sum(kfa_oppdatert$gaard24, na.rm = TRUE)), (sum(kfa_oppdatert$nettsalg24, na.rm = TRUE)), (sum(kfa_oppdatert$olutsalg24, na.rm = TRUE)), (sum(kfa_oppdatert$kultur24, na.rm = TRUE)), (sum(kfa_oppdatert$andre24, na.rm = TRUE))),
      name = as.factor(c("Dagligvarehandel","Bryggeri","Gårdsutsalg","Nettsalg","Øl- og mineralvannutsalg", "Kutlur", "Andre")))

salgbev_hc <- salgsbevillinger %>%
  hchart(
    "pie", hcaes(x = name, y = y),
    name = "Salgsbevillinger etter utsalgssted",
    colorByPoint = TRUE) %>%
    hc_colors(hdir_color)

salgbev_hc


# Les inn sav-fil for 2022_2023: 
# kfa_2022_2023 <- read_dta("O:/Prosjekt/Rusdata/Kommunenes forvaltning/Alkoholloven/Data_Stata/2023_beh.dta")



```

Følgende kommuner har missing på salgsbevillinger i 2024: `r salg_missing`; mens disse kommunene har rapportert å ha 0 salgsbevillinger i 2024: `r salg_null`. Når det gjelder de to sistenente kommunene med 0 salgsbevillinger, er vi usikre på om dette er korrekt. Vi har likevel valgt å ikke imutere fjorårets tall. For kommunene med missing, vil antall salgsbevillinger erstattes salgsbevillingene rapportert tidligere.

Med antall salgsbevillinger fra tidligere for kommunene med null salgsbevillinger og missing, så er totalt antall salgsbevillinger for salg av øl/rusbrus (alkoholholdig drikk 1) i 2024: `r sum(kfa_oppdatert$tot_salg24, na.rm = TRUE)`. Tilsvarende antall salgsbevillinger for salg av øl/rusbrus (alkoholholdig drikk 1) i 2023 var: `r sum(kfa_2023_2024$tot_salg23, na.rm = TRUE)`. I 2022 var antallet 4806, fra rapporten [Alkohol i Norge](https://www.fhi.no/le/alkohol/alkoholinorge/forebyggende-tiltak/salgs--og-skjenkebevillinger-kommunenes-forvaltning-av-alkoholloven/#salgsbevillinger).

#### Salgsbevillinger

##### Fordeling av salgsbevilling for øl/rusbrus etter utsalgssted

-   Salgsbevillinger dagligvare 2024: `r sum(kfa_oppdatert$dagligvare24, na.rm = TRUE)`.
-   Salgsbevillinger bryggeri 2024: `r sum(kfa_oppdatert$bryggeri24, na.rm = TRUE)`.
-   Salgsbevillinger gårdsutsalg 2024: `r sum(kfa_oppdatert$gaard24, na.rm = TRUE)`.
-   Salgsbevillinger nettsalg 2024: `r sum(kfa_oppdatert$nettsalg24, na.rm = TRUE)`.
-   Salgsbevillinger øl- og mineralvannutsalg 2024: `r sum(kfa_oppdatert$olutsalg24, na.rm = TRUE)`.
-   Salgsbevillinger kultur 2024: `r sum(kfa_oppdatert$kultur24, na.rm = TRUE)`.
-   Salgsbevillinger andre 2024: `r sum(kfa_oppdatert$andre24, na.rm = TRUE)`.

Tabell som viser fordeling av salgsbevillinger for øl/rusbrus etter utsalgssted i 2024, blant kommuner som har salgsbevillinger:

| Utsalgssted | Antall (n=`r length(which(kfa_oppdatert$tot_salg24 != 0 & !is.na(kfa_oppdatert$tot_salg24)))` | Prosent |
|------------------------|------------------------|------------------------|
| Dagligvare | `r sum(kfa_oppdatert$dagligvare24, na.rm = TRUE)` | `r round ((((sum(kfa_oppdatert$dagligvare24, na.rm = TRUE))/(sum(kfa_oppdatert$tot_salg24, na.rm = TRUE)))*100) , 1)` |
| Bryggeri | `r sum(kfa_oppdatert$bryggeri24, na.rm = TRUE)` | `r round ((((sum(kfa_oppdatert$bryggeri24, na.rm = TRUE))/(sum(kfa_oppdatert$tot_salg24, na.rm = TRUE)))*100) , 1)` |
| Gårdsutsalg | `r sum(kfa_oppdatert$gaard24, na.rm = TRUE)` | `r round ((((sum(kfa_oppdatert$gaard24, na.rm = TRUE))/(sum(kfa_oppdatert$tot_salg24, na.rm = TRUE)))*100) , 1)` |
| Nettsalg | `r sum(kfa_oppdatert$nettsalg24, na.rm = TRUE)` | `r round ((((sum(kfa_oppdatert$nettsalg24, na.rm = TRUE))/(sum(kfa_oppdatert$tot_salg24, na.rm = TRUE)))*100) , 1)` |
| Øl- og mineralvannutsalg | `r sum(kfa_oppdatert$olutsalg24, na.rm = TRUE)` | `r round ((((sum(kfa_oppdatert$olutsalg24, na.rm = TRUE))/(sum(kfa_oppdatert$tot_salg24, na.rm = TRUE)))*100) , 1)` |
| Kultur | `r sum(kfa_oppdatert$kultur24, na.rm = TRUE)` | `r round ((((sum(kfa_oppdatert$kultur24, na.rm = TRUE))/(sum(kfa_oppdatert$tot_salg24, na.rm = TRUE)))*100) , 1)` |
| Andre | `r sum(kfa_oppdatert$andre24, na.rm = TRUE)` | `r round ((((sum(kfa_oppdatert$andre24, na.rm = TRUE))/(sum(kfa_oppdatert$tot_salg24, na.rm = TRUE)))*100) , 1)` |

`r salgbev_hc` Figur: Nasjonal fordeling av antall salgsbevillinger for øl/rusbrus (alkoholholdig drikk gruppe 1) etter utsalgssted, 2024.

##### Antall kommuner med bevillinger for salg av øl/rusbrus (alkoholholdig drikk 1) etter utsalgssted og spredning av antall bevillinger i en enkelt kommune.

```{r}
#| message: false
#| echo: false
#| output: false

library(data.table)

# Anta at datasettet ditt heter kfa_oppdatert og er en data.table
utsalg_var <- c("dagligvare24", "bryggeri24", "gaard24", "nettsalg24", "olutsalg24", "kultur24", "andre24")

# Funksjon for å beregne ønsket statistikk for én variabel
oppsummer <- function(varnavn, dt) {
  verdier <- dt[[varnavn]]
  verdier <- verdier[!is.na(verdier)]  # Fjern NA
  kommuner_med_bevilling <- verdier[verdier > 0]
  antall_kommuner <- length(kommuner_med_bevilling)
  min_max <- if (antall_kommuner > 0) {
    paste0(min(kommuner_med_bevilling), " - ", max(kommuner_med_bevilling))
  } else {
    "0 - 0"
  }
  return(data.table(Utsalgssted = varnavn, Antall_kommuner = antall_kommuner, Min_Maks_bevilling = min_max))
}

# Lag tabellen
resultat_tabell <- rbindlist(lapply(utsalg_var, oppsummer, dt = kfa_oppdatert))

# Vis tabellen
print(resultat_tabell)

```

Antall kommuner med bevillinger for salg av øl/rusbrus (alkoholholdig drikk gruppe 1) etter utsalgssted og spredning av antall bevillinger i en enkelt kommune, 2024.

```{r}
#| message: false
#| echo: false

print(resultat_tabell)


```

##### Salgsbevillinger i kommuner

Antall kommuner etter grupperinger av antall salgsbevillinger for øl/rusbrus (alkoholholdig drikk gruppe 1), 2024:

```{r}
#| message: false
#| echo: false
#| output: false

# Tabell etter salgsbevillingsgrupper:
kfa_oppdatert <- as.data.table(kfa_oppdatert)

kfa_oppdatert[, salgsbevillingsgruppe := fifelse(
  tot_salg24 ==0, "0",
  fifelse(tot_salg24 >= 1 & tot_salg24 <= 5, "1–5",
  fifelse(tot_salg24 >= 6 & tot_salg24 <= 10, "6–10",
  fifelse(tot_salg24 >= 11 & tot_salg24 <= 20, "11–20",
  fifelse(tot_salg24 >= 21 & tot_salg24 <= 30, "21–30",
  fifelse(tot_salg24 >= 31 & tot_salg24 <= 50, "31–50",
  fifelse(tot_salg24 > 50, "Over 50", NA_character_)))))))]

# Lag en tabell med antall kommuner per gruppe
fordeling <- kfa_oppdatert[!is.na(salgsbevillingsgruppe), .N, by = salgsbevillingsgruppe][order(salgsbevillingsgruppe)]

# Vis tabellen
print(fordeling)

# Lag tabell med antall kommuner per gruppe
rekkefolge <- c("0", "1–5", "6–10", "11–20", "21–30", "31–50", "Over 50")
fordeling <- kfa_oppdatert[!is.na(salgsbevillingsgruppe), .N, by = salgsbevillingsgruppe]
fordeling[, salgsbevillingsgruppe := factor(salgsbevillingsgruppe, levels = rekkefolge)]
fordeling <- fordeling[order(salgsbevillingsgruppe)]

# Sølylediagram:
highchart() %>%
  hc_chart(type = "column") %>%
  hc_title(text = "Antall kommuner etter salgsbevillingsgrupper") %>%
  hc_xAxis(categories = fordeling$salgsbevillingsgruppe, title = list(text = "Antall salgsbevillinger")) %>%
  hc_yAxis(title = list(text = "Antall kommuner")) %>%
  hc_series(list(name = "Antall kommuner", data = fordeling$N, color = "#025169")) %>%
  hc_plotOptions(column = list(dataLabels = list(enabled = TRUE)))

```

`r highchart() %>% hc_chart(type = "column") %>% hc_title(text = "Antall kommuner etter salgsbevillingsgrupper") %>% hc_xAxis(categories = fordeling$salgsbevillingsgruppe, title = list(text = "Antall salgsbevillinger")) %>% hc_yAxis(title = list(text = "Antall kommuner")) %>% hc_series(list(name = "Antall kommuner", data = fordeling$N, color = "#025169")) %>%  hc_plotOptions(column = list(dataLabels = list(enabled = TRUE)))`

#### Skjenkebevillinger

```{r}
#| message: false
#| echo: false
#| output: false

# rm(kfa_oppdatert) # fjerner datatable på kfa_oppdatert
class(kfa_oppdatert)
kfa_oppdatert <- as.data.frame(kfa_oppdatert)

# Summerer antall salgsbevillinger tot: 
kfa_oppdatert$tot_skjenk24 <- rowSums(kfa_oppdatert[, c(
  "q2_1_1", "q2_1_2", "q2_1_3"
)], na.rm = TRUE)

sum(kfa_oppdatert$tot_skjenk24, na.rm = TRUE) # Totalt antall med missing, må imputere missing fra i fjor
  
  # Sikrer at rader/kommuner med NA, forblir slik: 
  vars_skjenk <- c("q2_1_1", "q2_1_2", "q2_1_3")
  
  # Summér med na.rm = TRUE
  kfa_oppdatert$tot_skjenk24 <- rowSums(kfa_oppdatert[vars_skjenk], na.rm = TRUE)

  # Sett NA der alle er NA
  kfa_oppdatert$tot_skjenk24[rowSums(!is.na(kfa_oppdatert[vars_skjenk])) == 0] <- NA

# Hvilke kommuner er missing mtp salgsbevillinger? Må imputere fra 2023.
skjenk_missing <- kfa_oppdatert$kommune[is.na(kfa_oppdatert$tot_skjenk24)]
skjenk_missing
antall_skjenk_miss <- table(skjenk_missing)
sum(antall_skjenk_miss)
 
oldCode_missing <- kfa_oppdatert$oldCode[is.na(kfa_oppdatert$tot_skjenk24)]
# OBs på at flere av disse har endret kommunenr fra 2023 til 2024.
  
# Har noen kommuner i 2024, 0 skjenkebevillinger?
skjenk_null <- kfa_oppdatert$kommune[kfa_oppdatert$tot_skjenk24 == 0 &  !is.na(kfa_oppdatert$tot_skjenk24)]
skjenk_null
antall_skjenk_0 <- table(skjenk_null)
sum(antall_skjenk_0)


# Imputerer antall salgsbevillinger fra 2023 for kommuner med missing:

  # Finn indekser for matching mellom oldCode og utvalg_kommunenummer
  match_index <- match(kfa_oppdatert$oldCode, kfa_2023_2024$utvalg_kommunenummer)
  
  # Imputer tot_skjenk24 med tot_skjenk23 der tot_skjenk24 er NA eller 0
  kfa_oppdatert$tot_skjenk24[is.na(kfa_oppdatert$tot_skjenk24)] <- 
    kfa_2023_2024$tot_skjenk23[match_index][is.na(kfa_oppdatert$tot_skjenk24)]
  
# Gir antall skjenkebevillinger i 2024 med imputerte tall:
sum(kfa_oppdatert$tot_skjenk24, na.rm = TRUE) 

# Skjenkebevillinger etter gruppe:
  # Gruppe 1:

 # Lager ny variabel, dagligvare:
    kfa_oppdatert$gr1 <- kfa_oppdatert$q2_1_1
     match_index <- match(kfa_oppdatert$oldCode, kfa_2023_2024$utvalg_kommunenummer)
    # Imputerer tall fra 2023 for kommuner som har missing:
    kfa_oppdatert$gr1[is.na(kfa_oppdatert$gr1)] <- kfa_2023_2024$gr1[match_index][is.na(kfa_oppdatert$gr1)]
    
    # Sjekker at ingen er missing:
    table(is.na(kfa_oppdatert$gr1))
    # Sjekker antall dagligvare skjenkebevillinger:
    sum(kfa_oppdatert$gr1, na.rm = TRUE)
    
  # Gruppe 2:
     # Lager ny variabel, dagligvare:
    kfa_oppdatert$gr12 <- kfa_oppdatert$q2_1_2
     match_index <- match(kfa_oppdatert$oldCode, kfa_2023_2024$utvalg_kommunenummer)
    # Imputerer tall fra 2023 for kommuner som har missing:
    kfa_oppdatert$gr12[is.na(kfa_oppdatert$gr12)] <- kfa_2023_2024$gr12[match_index][is.na(kfa_oppdatert$gr12)]
    
    # Sjekker at ingen er missing:
    table(is.na(kfa_oppdatert$gr12))
    # Sjekker antall dagligvare skjenkesbevillinger:
    sum(kfa_oppdatert$gr12, na.rm = TRUE)
    
      # Gruppe 3:
     # Lager ny variabel, dagligvare:
    kfa_oppdatert$gr123 <- kfa_oppdatert$q2_1_3
     match_index <- match(kfa_oppdatert$oldCode, kfa_2023_2024$utvalg_kommunenummer)
    # Imputerer tall fra 2023 for kommuner som har missing:
    kfa_oppdatert$gr123[is.na(kfa_oppdatert$gr123)] <- kfa_2023_2024$gr123[match_index][is.na(kfa_oppdatert$gr123)]
    
    # Sjekker at ingen er missing:
    table(is.na(kfa_oppdatert$gr123))
    # Sjekker antall dagligvare skjenkesbevillinger:
    sum(kfa_oppdatert$gr123, na.rm = TRUE)
    
  

    
library(dplyr)
library(highcharter) 
# Set highcharter options
options(highcharter.theme = hc_theme_smpl(tooltip = list(valueDecimals = 2)))

# Data:
skjenkebevillinger <- data.frame(x = c(0, 1, 2),
      y = c((sum(kfa_oppdatert$gr1, na.rm = TRUE)), (sum(kfa_oppdatert$gr12, na.rm = TRUE)), (sum(kfa_oppdatert$gr123, na.rm = TRUE))),
      name = as.factor(c("Øl/rusbrus","Øl/rusbrus og vin","Øl/rusbrus, vin og brennevin")))

# Beregn totalen
total <- sum(skjenkebevillinger$y)

# Legg til prosentkolonne
skjenkebevillinger$prosent <- round((skjenkebevillinger$y / total) * 100, 1)


# Antall kommuner med verdi > 0 for hver gruppe
n_gr1   <- sum(kfa_oppdatert$gr1   > 0, na.rm = TRUE)
n_gr12  <- sum(kfa_oppdatert$gr12  > 0, na.rm = TRUE)
n_gr123 <- sum(kfa_oppdatert$gr123 > 0, na.rm = TRUE)

# Lag en data.frame med antall kommuner innen hver gruppe
skjenkebevillinger_n <- data.frame(
  name = c("Øl/rusbrus", "Øl/rusbrus og vin", "Øl/rusbrus, vin og brennevin"),
  n_kommuner = c(n_gr1, n_gr12, n_gr123)
)

print(skjenkebevillinger_n)


# Figur, kake:
skjenkbev_hc <- skjenkebevillinger %>%
  hchart(
    "pie", hcaes(x = name, y = y),
    name = "Skjenkebevillinger etter alkoholholdig drikk",
    colorByPoint = TRUE) %>%
    hc_colors(hdir_color)

skjenkbev_hc

# Min og maks-verdier i tot_skjenkebevillinger:
summary(kfa_oppdatert$tot_skjenk24)

# Antall kommuner med over 100 skjenkebevillinger:
kfa_oppdatert %>%
  summarise(
    min_verdi = min(tot_skjenk24, na.rm = TRUE),
    maks_verdi = max(tot_skjenk24, na.rm = TRUE),
    gjennomsnitt = mean(tot_skjenk24, na.rm = TRUE),
    median = median(tot_skjenk24, na.rm = TRUE),
    antall = n(),
    antall_over_100 = sum(tot_skjenk24 > 100, na.rm = TRUE)
  )

# Liste opp kommuner med over 100 skjenkebevillinger:

kfa_oppdatert %>%
  filter(tot_skjenk24 > 100) %>%
  select(kommune, tot_skjenk24)


```

I 2024 rapporterte `r sum(antall_skjenk_0)` å ha null skjenkebevillinger. Det var følgende kommuner: `r skjenk_null`.

Følgende kommuner (n=`r sum(antall_skjenk_miss)`) har missing på skjenkebevillinger `r skjenk_missing`, og vi imputerer antall skjenkebevilling fra tidligere. Totalt antall skjenkebevillinger i 2024 var: `r sum(kfa_oppdatert$tot_skjenk24, na.rm = TRUE)`. Dette inkluderer tidligere rapportert antall skjenkebevillinger fra kommunene som ikke har besvart spørsmålet for 2024. Tilsvarende tall i 2023 var: `r sum(kfa_2023_2024$tot_skjenk23, na.rm = TRUE)`. I 2022 var antallet 8456, fra rapporten [Alkohol i Norge](https://www.fhi.no/le/alkohol/alkoholinorge/forebyggende-tiltak/salgs--og-skjenkebevillinger-kommunenes-forvaltning-av-alkoholloven/#salgsbevillinger).

Fordelingen av hvilken alkoholholdig drikke skjenkebevillingene gjelder vises i figur og tabell under:

`r skjenkbev_hc`.

```{r}
#| message: false
#| echo: false

print(skjenkebevillinger)

print(skjenkebevillinger_n)

```

##### Antall skjenkebevillinger i kommuner

Antall kommuner med 100-max skjenkebevillinger:

```{r}
#| message: false
#| echo: false
#| output: false

# Tabell etter salgsbevillingsgrupper:
kfa_oppdatert <- as.data.table(kfa_oppdatert)

kfa_oppdatert[, skjenkebevillingsgruppe := fifelse(
  tot_skjenk24 == 0, "0",
  fifelse(tot_skjenk24 >= 1 & tot_skjenk24 <= 5, "1–5",
  fifelse(tot_skjenk24 >= 6 & tot_skjenk24 <= 10, "6–10",
  fifelse(tot_skjenk24 >= 11 & tot_skjenk24 <= 20, "11–20",
  fifelse(tot_skjenk24 >= 21 & tot_skjenk24 <= 30, "21–30",
  fifelse(tot_skjenk24 >= 31 & tot_skjenk24 <= 50, "31–50",
  fifelse(tot_skjenk24 > 50, "Over 50", NA_character_)))))))]

# Lag en tabell med antall kommuner per gruppe
fordeling_skjenk <- kfa_oppdatert[!is.na(skjenkebevillingsgruppe), .N, by = skjenkebevillingsgruppe][order(skjenkebevillingsgruppe)]

# Vis tabellen
print(fordeling_skjenk)

# Lag tabell med antall kommuner per gruppe
rekkefolge1 <- c("0", "1–5", "6–10", "11–20", "21–30", "31–50", "Over 50")
fordeling_skjenk <- kfa_oppdatert[!is.na(skjenkebevillingsgruppe), .N, by = skjenkebevillingsgruppe]
fordeling_skjenk[, skjenkebevillingsgruppe := factor(skjenkebevillingsgruppe, levels = rekkefolge1)]
fordeling_skjenk <- fordeling_skjenk[order(skjenkebevillingsgruppe)]

# Sølylediagram:
highchart() %>%
  hc_chart(type = "column") %>%
  hc_title(text = "Antall kommuner etter skjenkebevillingsgrupper") %>%
  hc_xAxis(categories = fordeling_skjenk$skjenkebevillingsgruppe, title = list(text = "Antall skjenkbevillinger")) %>%
  hc_yAxis(title = list(text = "Antall kommuner")) %>%
  hc_series(list(name = "Antall kommuner", data = fordeling_skjenk$N, color = "#025169")) %>%
  hc_plotOptions(column = list(dataLabels = list(enabled = TRUE)))

```

Antall kommuner etter grupperinger av antall skjenkebevillinger, 2024: `r highchart() %>% hc_chart(type = "column") %>% hc_title(text = "Antall kommuner etter skjenkebevillingsgrupper") %>% hc_xAxis(categories = fordeling_skjenk$skjenkebevillingsgruppe, title = list(text = "Antall skjenkbevillinger")) %>% hc_yAxis(title = list(text = "Antall kommuner")) %>% hc_series(list(name = "Antall kommuner", data = fordeling_skjenk$N, color = "#025169")) %>%  hc_plotOptions(column = list(dataLabels = list(enabled = TRUE)))`

##### Skjenkebevillinger på andre steder enn barer, diskotek, klubber, kaffer og resturanter:

Det var `r sum(kfa_oppdatert$q2_2 == "Ja", na.rm = TRUE)` kommuner som oppga at de hadde gitt skjenkebevillinger på andre steder enn barer, diskotek, klubber, kaffer og resturanter. De fleste av disse var gitt til:

```{r}
#| message: false
#| echo: false
#| output: false

kfa_oppdatert <- as.data.frame(kfa_oppdatert)

# Antall kommuner som oppgir å ha skjenkebevillinger på andre steder enn barer etc.
sum(kfa_oppdatert$q2_2 == "Ja", na.rm = TRUE)

# Antall skjenkebevill innenfor andre kateogirer:

# Lag en vektor med variabelnavn
varlist <- c(
  q2_2_1_1 = "Alders- og sykehjem / eldresenter el. liknende", 
  q2_2_1_2 = "Transportmidler (eks. båt)", 
  q2_2_1_3 = "Idrettsarena (utendørs og innendørs)", 
  q2_2_1_4 = "Kantiner",
  q2_2_1_5 = "Turisthytter", 
  q2_2_1_6 = "Kultur (kino, museer, konserthus, bibliotek)", 
  q2_2_1_7 = "Frisør/spa og velvære", 
  q2_2_1_8 = "Opplevelsessenter",
  q2_2_1_9 = "Selskapslokaler", 
  q2_2_1_10 = "Klær-/sko-/interiørbutikker el. liknende", 
  q2_2_1_11 = "Festival", 
  q2_2_1_12 = "Annet"
)

for (var in names(varlist)) {
  cat("\nSum for", varlist[[var]], ":\n")
  print(sum(kfa_oppdatert[[var]], na.rm = TRUE))
}

# 
var_labels <- c(
  q2_2_1_1 = "Alders- og sykehjem / eldresenter el. liknende", 
  q2_2_1_2 = "Transportmidler (eks. båt)", 
  q2_2_1_3 = "Idrettsarena (utendørs og innendørs)", 
  q2_2_1_4 = "Kantiner",
  q2_2_1_5 = "Turisthytter", 
  q2_2_1_6 = "Kultur (kino, museer, konserthus, bibliotek)", 
  q2_2_1_7 = "Frisør/spa og velvære", 
  q2_2_1_8 = "Opplevelsessenter",
  q2_2_1_9 = "Selskapslokaler", 
  q2_2_1_10 = "Klær-/sko-/interiørbutikker el. liknende", 
  q2_2_1_11 = "Festival", 
  q2_2_1_12 = "Annet"
)

# Lag tabell med summer
andreskjenkebev <- data.frame(
  Variabel = names(var_labels),
  Label = unname(var_labels),
  Sum = sapply(names(var_labels), function(var) {
    sum(kfa_oppdatert[[var]], na.rm = TRUE)
  })
)


# Lag tabell med antall rader der verdien > 0
andreskjenkebev_n <- data.frame(
  Variabel = names(var_labels),
  Label = unname(var_labels),
  Antall_n = sapply(names(var_labels), function(var) {
    sum(kfa_oppdatert[[var]] > 0, na.rm = TRUE)
  })
)


# Vis tabellene
print(andreskjenkebev) # Viser totalt antall bevillinger for hver kategori.
print(andreskjenkebev_n) # Viser antall kommuner som har de ulike bevillingene.

sum(andreskjenkebev$Sum)

```

Antall skjenkebevillinger (n=`r sum(andreskjenkebev$Sum)`) som var gitt til andre steder enn barer, diskotek, klubber, kafeer og restauranter i 2024:

```{r}
#| message: false
#| echo: false

print(andreskjenkebev)

sum(andreskjenkebev$Sum)
```

Under vises antall kommuner som har gitt skjenkebevillinger til andre steder enn barer, diskotek, klubber, kafeer og restauranter i 2024:

```{r}
#| message: false
#| echo: false


print(andreskjenkebev_n)


```

#### Antall skjenkebevillinger for en enkeltanledning og/eller ambulerende skjenkebevillinger ble gitt i 2024

```{r}
#| message: false
#| echo: false
#| output: false

# Antall skjenkebev for enkeltanledning eller ambulerende:
sum(kfa_oppdatert$q2_3, na.rm = TRUE)

# Spredningen: 
summary(kfa_oppdatert$q2_3)


# Tabell etter ambulerendebevillingerbevillingsgrupper:
kfa_oppdatert <- as.data.table(kfa_oppdatert)

kfa_oppdatert[, ambubevillingsgruppe := fifelse(
  q2_3 == 0, "0",
  fifelse(q2_3 >= 1 & q2_3 <= 10, "1-10",
  fifelse(q2_3 >= 11 & q2_3 <= 20, "11-20",
  fifelse(q2_3 >= 21 & q2_3 <= 30, "21-30",
  fifelse(q2_3 >= 31 & q2_3 <= 40, "31-40",
  fifelse(q2_3 >= 41 & q2_3 <= 50, "41-50",
  fifelse(q2_3 > 50, "Over 50", NA_character_)))))))]

# Lag en tabell med antall kommuner per gruppe
fordeling_ambu <- kfa_oppdatert[!is.na(ambubevillingsgruppe), .N, by = ambubevillingsgruppe][order(ambubevillingsgruppe)]

# Vis tabellen
print(fordeling_ambu)

# Lag tabell med antall kommuner per gruppe
rekkefolge2 <- c("0", "1-10", "11-20", "21-30", "31-40", "41-50", "Over 50")
fordeling_ambu <- kfa_oppdatert[!is.na(ambubevillingsgruppe), .N, by = ambubevillingsgruppe]
fordeling_ambu[, ambubevillingsgruppe := factor(ambubevillingsgruppe, levels = rekkefolge2)]
fordeling_ambu <- fordeling_ambu[order(ambubevillingsgruppe)]

# Sølylediagram:
highchart() %>%
  hc_chart(type = "column") %>%
  hc_title(text = "Antall kommuner etter bevillingsgrupper") %>%
  hc_xAxis(categories = fordeling_ambu$ambubevillingsgruppe, title = list(text = "Antall enkelt/ambulerende bevillinger")) %>%
  hc_yAxis(title = list(text = "Antall kommuner")) %>%
  hc_series(list(name = "Antall kommuner", data = fordeling_ambu$N, color = "#025169")) %>%
  hc_plotOptions(column = list(dataLabels = list(enabled = TRUE)))

  
```

I 2024 var total antall skjenkebevillinger for en enkelt anledning eller ambulerende skjenkebevillinger: `r format(sum(kfa_oppdatert$q2_3, na.rm = TRUE), scientific = FALSE)`. Det er stor spredning i antallet slike som komunene oppgir å ha gitt, mix-max: `r min(kfa_oppdatert$q2_3, na.rm = TRUE)`-`r max(kfa_oppdatert$q2_3, na.rm = TRUE)`. I 2023 ble det gitt totalt antall `r format(sum(kfa_2023_2024$q2_3, na.rm = TRUE), scientific = FALSE)` skjenkebevillinger for en enkelt anledning eller ambulerende skjenkebevillinger.

Fordelingen av antall kommuner med enkelt/ambulerende skjenkebevillinger i 2024:

`r highchart() %>% hc_chart(type = "column") %>% hc_title(text = "Antall kommuner etter bevillingsgrupper") %>% hc_xAxis(categories = fordeling_ambu$ambubevillingsgruppe, title = list(text = "Antall enkelt/ambulerende bevillinger")) %>% hc_yAxis(title = list(text = "Antall kommuner")) %>% hc_series(list(name = "Antall kommuner", data = fordeling_ambu$N, color = "#025169")) %>% hc_plotOptions(column = list(dataLabels = list(enabled = TRUE)))`

#### Vilkår for skjenkebevillinger

Det var det `r round ((((sum(kfa_oppdatert$q2_5 == "Ja", na.rm = TRUE))/(nrow(kommuner2024)))*100), 1)`% (n=`r sum(kfa_oppdatert$q2_5 == "Ja", na.rm = TRUE)`) kommuner som rapporterte å ha vilkår knyttet til noen av skjenkebevillingene i 2024. I 2023 var det `r round ((((sum(kfa_2023_2024$q2_5 == 1, na.rm = TRUE))/(nrow(kommuner2023)))*100), 1)`% kommuner som rapporterte å ha vilkår knyttet til noen av skjenkebevillingene.

```{r}
#| message: false
#| echo: false
#| output: false

kfa_oppdatert <- as.data.frame(kfa_oppdatert)

# Antall kommuner som har vilkår knytte ttil noen av skjenkebevillingene:
sum(kfa_oppdatert$q2_5 == "Ja", na.rm = TRUE)

# Antall kommuner som rapporterer å ha ulike vilkår knyttet til skjenkebevillinger:
sum(kfa_oppdatert$q2_5_1_1 == "Ordensvakter på stedet", na.rm = TRUE)
sum(kfa_oppdatert$q2_5_1_2 == "Kursing av ansatte (eks. Ansvarlig Vertskap e-læringskurs )", na.rm = TRUE)
sum(kfa_oppdatert$q2_5_1_3 == "Nedre aldersgrense", na.rm = TRUE)
sum(kfa_oppdatert$q2_5_1_4 == "Matservering", na.rm = TRUE)
sum(kfa_oppdatert$q2_5_1_5 == "Begrensning i skjenketid", na.rm = TRUE)
sum(kfa_oppdatert$q2_5_1_6 == "Annet", na.rm = TRUE)
sum(kfa_oppdatert$q2_5_1_7 == "Ingen vilkår ble benyttet", na.rm = TRUE)

# Tabell og figur: 

# Lag en tabell med summerte verdier
vilkar_data <- data.frame(
  Vilkår = c(
    "Ordensvakter på stedet",
    "Kursing av ansatte",
    "Nedre aldersgrense",
    "Matservering",
    "Begrensning i skjenketid",
    "Annet",
    "Ingen vilkår ble benyttet"
  ),
  Antall = c(
    sum(kfa_oppdatert$q2_5_1_1 == "Ordensvakter på stedet", na.rm = TRUE),
    sum(kfa_oppdatert$q2_5_1_2 == "Kursing av ansatte (eks. Ansvarlig Vertskap e-læringskurs )", na.rm = TRUE),
    sum(kfa_oppdatert$q2_5_1_3 == "Nedre aldersgrense", na.rm = TRUE),
    sum(kfa_oppdatert$q2_5_1_4 == "Matservering", na.rm = TRUE),
    sum(kfa_oppdatert$q2_5_1_5 == "Begrensning i skjenketid", na.rm = TRUE),
    sum(kfa_oppdatert$q2_5_1_6 == "Annet", na.rm = TRUE),
    sum(kfa_oppdatert$q2_5_1_7 == "Ingen vilkår ble benyttet", na.rm = TRUE)
  )
)


# Lag søylediagram med highcharter
highchart() %>%
  hc_chart(type = "column") %>%
  hc_title(text = "Bruk av vilkår ved skjenkebevilling") %>%
  hc_xAxis(categories = vilkar_data$Vilkår) %>%
  hc_yAxis(title = list(text = "Antall kommuner")) %>%
  hc_series(list(
    name = "Antall kommuner",
    data = vilkar_data$Antall,
    color = "#025169"
  )) %>%
  hc_plotOptions(column = list(dataLabels = list(enabled = TRUE)))


```

Fordelingen av vilkårene, 2024:

`r highchart() %>% hc_chart(type = "column") %>% hc_title(text = "Bruk av vilkår ved skjenkebevilling") %>% hc_xAxis(categories = vilkar_data$Vilkår) %>% hc_yAxis(title = list(text = "Antall kommuner")) %>% hc_series(list(name = "Antall kommuner", data = vilkar_data$Antall, color = "#025169" )) %>% hc_plotOptions(column = list(dataLabels = list(enabled = TRUE)))`

#### Nye bevillinger

##### Salgsbevillinger

Antall nye salgsbevillinger som ble innvilget i 2024: `r sum(kfa_oppdatert$q1_13a_1, na.rm = TRUE)`. Antall kommuner som rapportert innvilgelse: `r sum(kfa_oppdatert$q1_13a_1 > 0 & !is.na(kfa_oppdatert$q1_13a_1))`.

Antall nye salgsbevillinger som ble avslått: `r sum(kfa_oppdatert$q1_13a_2, na.rm = TRUE)`, av `r sum(kfa_oppdatert$q1_13a_2 > 0 & !is.na(kfa_oppdatert$q1_13a_2))` kommuner. Årsak til avslag:

-   Manglende vandelskrav: `r sum(kfa_oppdatert$q1_13b_1, na.rm = TRUE)`.
-   Lokalpolitiske hensyn: `r sum(kfa_oppdatert$q1_13b_2, na.rm = TRUE)`.
-   Manglende dokumentasjon fra søker: `r    sum(kfa_oppdatert$q1_13b_3, na.rm = TRUE)`.
-   Annet: `r sum(kfa_oppdatert$q1_13b_4, na.rm = TRUE)`.

```{r}
#| message: false
#| echo: false
#| output: false

# Antall nye salgsbevillinger som ble innvilget:
  sum(kfa_oppdatert$q1_13a_1, na.rm = TRUE)
  
  # Antall kommuner som har innvilget en ny salgsbevilling og ikke har missing:
  sum(kfa_oppdatert$q1_13a_1 > 0 & !is.na(kfa_oppdatert$q1_13a_1))
  
  # Fordeling av innvilgede nye salgsbevillinger:
table(kfa_oppdatert$q1_13a_1, useNA = "ifany")
  
# Antall nye salgsbevillinger som ble avslått:
  sum(kfa_oppdatert$q1_13a_2, na.rm = TRUE)
  
   # Antall kommuner som har avslått en ny salgsbevilling og ikke har missing:
  sum(kfa_oppdatert$q1_13a_2 > 0 & !is.na(kfa_oppdatert$q1_13a_2))
  
  # Fordeling av avslåtte salgsbevillinger:
  table(kfa_oppdatert$q1_13a_2, useNA = "ifany")
  
  # Årsak til avslag:
   sum(kfa_oppdatert$q1_13b_1, na.rm = TRUE) # Vandelskrav
   sum(kfa_oppdatert$q1_13b_2, na.rm = TRUE) # Lokalpolitiske hensyn
   sum(kfa_oppdatert$q1_13b_3, na.rm = TRUE) # Manglende dokumentasjon fra søker
   sum(kfa_oppdatert$q1_13b_4, na.rm = TRUE) # Annet
```

##### Skjenkebevillinger

Antall nye skjenkebevillinger som ble innvilget: `r sum(kfa_oppdatert$q2_8a_1, na.rm = TRUE)`.

Antall nye skjenkebevillinger som ble avslått: `r sum(kfa_oppdatert$q2_8a_2, na.rm = TRUE)`. Av de som ble avslått var årsakene:

-   Manglende vandelskrav: `r sum(kfa_oppdatert$q2_8b_1_1, na.rm = TRUE)`.
-   Lokalpolitiske hensyn: `r sum(kfa_oppdatert$q2_8b_1_2, na.rm = TRUE)`.
-   Manglende dokumentasjon fra søker: `r sum(kfa_oppdatert$q2_8b_1_3, na.rm = TRUE)`.
-   Manglende godkjenning fra andre offentlige myndigheter: `r sum(kfa_oppdatert$q2_8b_1_4, na.rm = TRUE)`.
-   Annet: `r sum(kfa_oppdatert$q2_8b_1_5, na.rm = TRUE)`.

```{r}
#| message: false
#| echo: false
#| output: false

# Antall nye skjenkebevillinger som ble innvilget:
  sum(kfa_oppdatert$q2_8a_1, na.rm = TRUE)

  # Antall kommuner som har innvilget en ny skjenkesbevilling og ikke har missing:
  sum(kfa_oppdatert$q2_8a_1 > 0 & !is.na(kfa_oppdatert$q2_8a_1))
  
    # Fordeling av innvilgede nye skjenkesbevillinger:
table(kfa_oppdatert$q2_8a_1, useNA = "ifany")
  
# Antall nye skjenkebevillinger som ble avslått:
  sum(kfa_oppdatert$q2_8a_2, na.rm = TRUE)

   # Antall kommuner som har avslått en ny skjenkesbevilling og ikke har missing:
  sum(kfa_oppdatert$q2_8a_2 > 0 & !is.na(kfa_oppdatert$q2_8a_2))
  
    # Årsak til avslag:
   # Årsak til avslag:
   sum(kfa_oppdatert$q2_8b_1_1, na.rm = TRUE) # Vandelskrav
   sum(kfa_oppdatert$q2_8b_1_2, na.rm = TRUE) # Lokalpolitiske hensyn
   sum(kfa_oppdatert$q2_8b_1_3, na.rm = TRUE) # Manglende dokumentasjon fra søker
   sum(kfa_oppdatert$q2_8b_1_4, na.rm = TRUE) # Manglende godkjenning fra andre offentlige myndigheter
   sum(kfa_oppdatert$q2_8b_1_5, na.rm = TRUE) # Annet

```

##### Fornyelse av salg og skjenking

Kommunens gjennomføring av fornyelse av salg- og skjenkebevillinger i 2024.

```{r}
#| message: false
#| echo: false
#| output: false

table(kfa_oppdatert$q4_1)

library(highcharter)

# Lag frekvenstabell
freq_fornyelse <- table(kfa_oppdatert$q4_1)

# Konverter til data.frame
fornyelse <- data.frame(
  kategori = names(freq_fornyelse),
  antall = as.numeric(freq_fornyelse)
)

# Lag kakediagram med highcharter
highchart() %>%
  hc_chart(type = "pie") %>%
  hc_title(text = "Antall kommuner og gjennomføring av fornyelse av bevillinger") %>%
  hc_add_series(
    data = list_parse2(fornyelse),
    name = "Svar") %>%
    hc_colors(hdir_color)


```

`r highchart() %>% hc_chart(type = "pie") %>% hc_title(text = "Antall kommuner og gjennomføring av fornyelse av bevillinger") %>% hc_add_series( data = list_parse2(fornyelse), name = "Svar") %>% hc_colors(hdir_color)`

# Salgs- og skjenketider:

## Salgstider

```{r}
#| message: false
#| echo: false


# Antall kommuner med ulik skjenketid for salg av øl/rusbrus på hverdager:
table(kfa_oppdatert$q1_3a_1)

makssalg_hver <- table(kfa_oppdatert$q1_3a_1, useNA = "no")
total_N <- sum(makssalg_hver) # Totalt antall besvart
  # Prosentfordeling: 
  round(prop.table(table(kfa_oppdatert$q1_3a_1, useNA = "no")) * 100, 1)
  total_N

# Antall kommuner med ulik skjenketid for salg av øl/rusbrus på lørdager:
table(kfa_oppdatert$q1_3a_2)

makssalg_helg <- table(kfa_oppdatert$q1_3a_2, useNA = "no")
total_N <- sum(makssalg_helg) # Totalt antall besvart
  # Prosentfordeling: 
  round(prop.table(table(kfa_oppdatert$q1_3a_2, useNA = "no")) * 100, 1)
total_N

# Antall kommuner hvor alle salgsbevillingene var gitt til maksimaltiden:
table(kfa_oppdatert$q1_3b)


```

## Skjenketider

```{r}
#| message: false
#| echo: false

# Antall kommuner med maksimaltid for skjenking av øl/rusbrus og vin, for helg om ulik tid:
table(kfa_oppdatert$q2_6a)

maksskjenk_ol <- table(kfa_oppdatert$q2_6a, useNA = "no")
total_N <- sum(maksskjenk_ol) # Totalt antall besvart
  # Prosentfordeling: 
  round(prop.table(table(kfa_oppdatert$q2_6a, useNA = "no")) * 100, 2)
total_N 

  # Anall kommuner hvor alle skjenkebevillingene for øl/rusbrus var gitt til maksimaltiden:
table(kfa_oppdatert$q2_6b)

# Antall kommuner med maksimaltid for skjenking av brennevin, for helg om ulik tid:
table(kfa_oppdatert$q2_7a)

maksskjenk_bren <- table(kfa_oppdatert$q2_7a, useNA = "no")
total_N <- sum(maksskjenk_bren) # Totalt antall besvart
  # Prosentfordeling: 
  round(prop.table(table(kfa_oppdatert$q2_7a, useNA = "no")) * 100, 2)
  total_N 
  # Anall kommuner hvor alle skjenkebevillingene for brennevin var gitt til maksimaltiden:
table(kfa_oppdatert$q2_7b)

# Beregne antall a salgsbevillingene som gjaldt til maksimaltiden:
# Totalt antall salgsbevillinger:
  sum(kfa_oppdatert$tot_salg24, na.rm = TRUE)
  
# Kommuner hvor alle salgsbevillingene var gitt til makstid og antall salgsbevillinger:
sum(kfa_oppdatert$tot_salg24[kfa_oppdatert$q1_3b == "Samtlige"], na.rm = TRUE) # 4454


# Kommuner som ikke hadde gitt bevilling til makstid for alle, og antall som hadde til makstid:
kfa_oppdatert$q1_3b_2_other <- as.integer(kfa_oppdatert$q1_3b_2_other)
sum(kfa_oppdatert$q1_3b_2_other, na.rm = TRUE) #133 (antall salgsbev til makstid)

# Totalt antall salgsbevillinger med salgsbevilling til makstid:

sum(kfa_oppdatert$q1_3b_2_other, na.rm = TRUE) +
  sum(kfa_oppdatert$tot_salg24[kfa_oppdatert$q1_3b == "Samtlige"], na.rm = TRUE) ## 4587 salgsbev gjaldt til makstid

# I prosent:
((
sum(kfa_oppdatert$q1_3b_2_other, na.rm = TRUE) +
 sum(kfa_oppdatert$tot_salg24[kfa_oppdatert$q1_3b == "Samtlige"], na.rm = TRUE)
)/sum(kfa_oppdatert$tot_salg24, na.rm = TRUE))*100


## Skjenking FORTSETT HER

# Kommuner hvor alle skjenkebevillingene var gitt til makstid og antall skjenkebevillinger:
sum(kfa_oppdatert$tot_skjenk24[kfa_oppdatert$q2_6b == "Samtlige"], na.rm = TRUE)


# Kommer som ikke hadde gitt bevilling til makstid for alle, og antall som hadde til makstid:
kfa_oppdatert$q2_6b_2_other <- as.integer(kfa_oppdatert$q2_6b_2_other)
sum(kfa_oppdatert$q2_6b_2_other, na.rm = TRUE)

# Totalt antall salgsbevillinger med salgsbevilling til makstid:

sum(kfa_oppdatert$q2_6b_2_other, na.rm = TRUE) +
  sum(kfa_oppdatert$tot_skjenk24[kfa_oppdatert$q2_6b == "Samtlige"], na.rm = TRUE)

# I prosent:
((
sum(kfa_oppdatert$q2_6b_2_other, na.rm = TRUE) +
 sum(kfa_oppdatert$tot_skjenk24[kfa_oppdatert$q2_6b == "Samtlige"], na.rm = TRUE)
)/sum(kfa_oppdatert$tot_skjenk24, na.rm = TRUE))*100

```

Av alle salgsbevillingene hadde `r round ((((sum(kfa_oppdatert$q1_3b_2_other, na.rm = TRUE) + sum(kfa_oppdatert$tot_salg24[kfa_oppdatert$q1_3b == "Samtlige"], na.rm = TRUE))/sum(kfa_oppdatert$tot_salg24, na.rm = TRUE))*100), 1)` % (n=`r sum(kfa_oppdatert$q1_3b_2_other, na.rm = TRUE) +  sum(kfa_oppdatert$tot_salg24[kfa_oppdatert$q1_3b == "Samtlige"], na.rm = TRUE)`) salgsbevilling til maksimaltiden.

## Salgs- og skjenketider i utvalgte byer

| Kommune | Salgstid, hverdager | Salgstid, helg | Skjenketid øl/rusbrus og vin | Skjenketid brennevin |
|---------------|---------------|---------------|---------------|---------------|
| Oslo | `r subset(kfa_oppdatert, kommunenummer == 301, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 301, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 301, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 301, select = c(q2_7a))` |
| Bergen | `r subset(kfa_oppdatert, kommunenummer == 4601, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 4601, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 4601, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 4601, select = c(q2_7a))` |
| Trondheim | `r subset(kfa_oppdatert, kommunenummer == 5001, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 5001, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 5001, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 5001, select = c(q2_7a))` |
| Stavanger | `r subset(kfa_oppdatert, kommunenummer == 1103, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 1103, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 1103, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 1103, select = c(q2_7a))` |
| Kristiansand | `r subset(kfa_oppdatert, kommunenummer == 4204, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 4204, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 4204, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 4204, select = c(q2_7a))` |
| Fredrikstad | `r subset(kfa_oppdatert, kommunenummer == 3107, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 3107, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 3107, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 3107, select = c(q2_7a))` |
| Tromsø | `r subset(kfa_oppdatert, kommunenummer == 5501, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 5501, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 5501, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 5501, select = c(q2_7a))` |
| Sandnes | `r subset(kfa_oppdatert, kommunenummer == 1108, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 1108, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 1108, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 1108, select = c(q2_7a))` |
| Drammen | `r subset(kfa_oppdatert, kommunenummer == 3301, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 3301, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 3301, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 3301, select = c(q2_7a))` |
| Sandefjord | `r subset(kfa_oppdatert, kommunenummer == 3907, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 3907, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 3907, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 3907, select = c(q2_7a))` |
| Sarpsborg | `r subset(kfa_oppdatert, kommunenummer == 3105, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 3105, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 3105, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 3105, select = c(q2_7a))` |
| Skien | `r subset(kfa_oppdatert, kommunenummer == 4003, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 4003, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 4003, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 4003, select = c(q2_7a))` |
| Bodø | `r subset(kfa_oppdatert, kommunenummer == 1804, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 1804, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 1804, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 1804, select = c(q2_7a))` |
| Larvik | `r subset(kfa_oppdatert, kommunenummer == 3909, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 3909, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 3909, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 3909, select = c(q2_7a))` |
| Ålesund | `r subset(kfa_oppdatert, kommunenummer == 1508, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 1508, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 1508, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 1508, select = c(q2_7a))` |
| Arendal | `r subset(kfa_oppdatert, kommunenummer == 4203, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 4203, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 4203, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 4203, select = c(q2_7a))` |
| Tønsberg | `r subset(kfa_oppdatert, kommunenummer == 3905, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 3905, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 3905, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 3905, select = c(q2_7a))` |
| Porsgrunn | `r subset(kfa_oppdatert, kommunenummer == 4001, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 4001, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 4001, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 4001, select = c(q2_7a))` |
| Haugesund | `r subset(kfa_oppdatert, kommunenummer == 1106, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 1106, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 1106, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 1106, select = c(q2_7a))` |
| Moss | `r subset(kfa_oppdatert, kommunenummer == 3103, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 3103, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 3103, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 3103, select = c(q2_7a))` |
| Gjøvik | `r subset(kfa_oppdatert, kommunenummer == 3407, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 3407, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 3407, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 3407, select = c(q2_7a))` |
| Hamar | `r subset(kfa_oppdatert, kommunenummer == 3403, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 3403, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 3403, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 3403, select = c(q2_7a))` |
| Halden | `r subset(kfa_oppdatert, kommunenummer == 3101, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 3101, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 3101, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 3101, select = c(q2_7a))` |
| Lillehammer | `r subset(kfa_oppdatert, kommunenummer == 3405, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 3405, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 3405, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 3405, select = c(q2_7a))` |
| Horten | `r subset(kfa_oppdatert, kommunenummer == 3901, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 3901, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 3901, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 3901, select = c(q2_7a))` |
| Kongsberg | `r subset(kfa_oppdatert, kommunenummer == 3303, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 3303, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 3303, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 3303, select = c(q2_7a))` |
| Molde | `r subset(kfa_oppdatert, kommunenummer == 1506, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 1506, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 1506, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 1506, select = c(q2_7a))` |
| Harstad | `r subset(kfa_oppdatert, kommunenummer == 5503, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 5503, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 5503, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 5503, select = c(q2_7a))` |
| Kristiansund | `r subset(kfa_oppdatert, kommunenummer == 1505, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 1505, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 1505, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 1505, select = c(q2_7a))` |
| Steinkjer | `r subset(kfa_oppdatert, kommunenummer == 5006, select = c(q1_3a_1))` | `r subset(kfa_oppdatert, kommunenummer == 5006, select = c(q1_3a_2))` | `r subset(kfa_oppdatert, kommunenummer == 5006, select = c(q2_6a))` | `r subset(kfa_oppdatert, kommunenummer == 5006, select = c(q2_7a))` |
|  |  |  |  |  |

# Brudd på alkoholloven

## Overtredelser knyttet til salgsbevillinger etter type

```{r}
#| message: false
#| echo: false
#| output: false

# Antall kommuner som har rapportert overtredelser knyttet til salgsbevillinger:
table(kfa_oppdatert$q1_6)

# Summerer antall overtredelser knyttet til salgsbevillinger: 

  # Sikrer at rader/kommuner med NA, forblir slik: 
  vars_otgsalg <- c("q1_6a_1_1", "q1_6a_1_2", "q1_6a_1_3", "q1_6a_1_4", "q1_6a_1_5", "q1_6a_1_6", "q1_6a_1_7", "q1_6a_1_8", "q1_6a_1_9", "q1_6a_1_10", "q1_6a_1_11", "q1_6a_1_12", "q1_6a_1_13", "q1_6a_1_14", "q1_6a_1_15", "q1_6a_1_16")
  
  navn_otgsalg <- c("Salg til mindreårige", "Brudd på kravet om forsvarlig drift", "Hindring av kontroll", "Salg til åpenbart påvirket person", "Brudd på tidsbestemmelsene", "Brudd på reklamebestemmelsene", "Brudd på alderskrav til den som selger alkohol", "Mangler ved internkontrollen", "Brudd på regler om styrer og stedfortreder", "Brudd på reglene om plassering av alkoholholdig drikk på salgsstedet", "Brudd på vilkår i bevillingsvedtaket", "Manglende levering av omsetningsoppgave innen kommunens frist", "Manglende betaling av bevillingsgebyr innen kommunens frist", "Omsetning med rabatt", "Ubetjent salg", "Annen type overtredelse")
  
  # Summér med na.rm = TRUE
  kfa_oppdatert$otg_salg24 <- rowSums(kfa_oppdatert[vars_otgsalg], na.rm = TRUE)
  
  # Sett NA der alle er NA
  kfa_oppdatert$otg_salg24[rowSums(!is.na(kfa_oppdatert[vars_otgsalg])) == 0] <- NA

sum(kfa_oppdatert$otg_salg24, na.rm = TRUE)


# Lag datasettet til figur:
otg_salg <- data.frame(
  x = seq_along(vars_otgsalg) - 1,
  y = sapply(vars_otgsalg, function(v) sum(kfa_oppdatert[[v]], na.rm = TRUE)),
  name = factor(navn_otgsalg)
)

## Figur som viser overtredelser knyttet til salg:
highchart() %>%
  hc_chart(type = "bar") %>%  # Liggende søyler
  hc_title(text = "Overtredelser knyttet til salgsbevillinger") %>%
  hc_xAxis(categories = otg_salg$name) %>%  # Bruk navnene som kategorier
  hc_add_series(
    name = "",
   data = otg_salg$y,
      colorByPoint = TRUE) %>%
    hc_colors(hdir_color) %>%
  hc_plotOptions(bar = list(dataLabels = list(enabled = TRUE))) %>% # Viser verdier på søylene
hc_legend(enabled = FALSE)  # Fjerner legend

# Tabell om nødvendig
#kable(otg_salg)


```

Det var `r sum(kfa_oppdatert$q1_6 == "Ja", na.rm = TRUE)` kommuner som rapporterte overtredelser knyttet til salgsbevillinger i 2024. Totalt ble det avdekket `r sum(kfa_oppdatert$otg_salg24, na.rm = TRUE)` overtredelser knyttet til salgsbevillinger.

Fordelingen av de ulike overtredlsene vises under.

`r highchart() %>%  hc_chart(type = "bar") %>% hc_title(text = "Overtredelser knyttet til salgsbevillinger") %>%  hc_xAxis(categories = otg_salg$name) %>% hc_add_series(name = "", data = otg_salg$y, colorByPoint = TRUE) %>%  hc_colors(hdir_color) %>% hc_plotOptions(bar = list(dataLabels = list(enabled = TRUE))) %>% hc_legend(enabled = FALSE)`

## Overtredelser knyttet til skjenkebevillinger etter type

```{r}
#| message: false
#| echo: false
#| output: false


# Antall kommuner som har rapportert overtredelser knyttet til salgsbevillinger:
table(kfa_oppdatert$q2_11)

# Summerer antall overtredelser knyttet til salgsbevillinger: 

  # Sikrer at rader/kommuner med NA, forblir slik: 
  vars_otgskjenk <- c("q2_11a_1_1", "q2_11a_1_2", "q2_11a_1_3", "q2_11a_1_4", "q2_11a_1_5", "q2_11a_1_6", "q2_11a_1_7", "q2_11a_1_8", "q2_11a_1_9", "q2_11a_1_10","q2_11a_1_11","q2_11a_1_12", "q2_11a_1_13", "q2_11a_1_14", "q2_11a_1_15", "q2_11a_1_16", "q2_11a_1_17", "q2_11a_1_18", "q2_11a_1_19", "q2_11a_1_20", "q2_11a_1_21", "q2_11a_1_22", "q2_11a_1_23")
  
  navn_otgskjenk <- c("Skjenking til mindreårige", "Brudd på bistandsplikten", "Brudd på kravet om forsvarlig drift", "Hindring av kontroll", "Skjenking til åpenbart påvirket person", "Brudd på tidsbestemmelsene", "Brudd på reklamebestemmelsene", "Skjenking av sprit til person mellom 18 og 20 år", "Brudd på alderskrav til den som skjenker alkohol", "Åpenbart påvirket person i lokalet", "Mangler ved internkontrollsystemet", "Brudd på regler om styrer og stedfortreder", "Gjentatt diskriminering", "Gjentatt narkotikaomsetning", "Brudd på reglene om alkoholfrie alternativer", "Brudd på reglene om plassering av alkoholholdig drikk på skjenkestedet", "Brudd på reglene om skjenkemengde for brennevin", "Brudd på vilkår i bevillingsvedtaket", "Konsum av medbrakt alkohol", "Gjester tar med alkohol ut", "Manglende levering av omsetningsoppgave innen kommunens frist", "Manglende betaling av bevillingsgebyr innen kommunens frist", "Annen type overtredelse")
  
  # Summér med na.rm = TRUE
  kfa_oppdatert$otg_skjenk24 <- rowSums(kfa_oppdatert[vars_otgskjenk], na.rm = TRUE)
  
  # Sett NA der alle er NA
  kfa_oppdatert$otg_skjenk24[rowSums(!is.na(kfa_oppdatert[vars_otgskjenk])) == 0] <- NA

  sum(kfa_oppdatert$otg_skjenk24, na.rm = TRUE)


# Lag datasettet til figur:
otg_skjenk <- data.frame(
  x = seq_along(vars_otgskjenk) - 1,
  y = sapply(vars_otgskjenk, function(v) sum(kfa_oppdatert[[v]], na.rm = TRUE)),
  name = factor(navn_otgskjenk)
)

## Figur som viser overtredelser knyttet til salg:
highchart() %>%
  hc_chart(type = "bar") %>%  # Liggende søyler
  hc_title(text = "Overtredelser knyttet til salgsbevillinger") %>%
  hc_xAxis(categories = otg_skjenk$name) %>%  # Bruk navnene som kategorier
  hc_add_series(
    name = "",
   data = otg_skjenk$y,
      colorByPoint = TRUE) %>%
    hc_colors(hdir_color) %>%
  hc_plotOptions(bar = list(dataLabels = list(enabled = TRUE))) %>% # Viser verdier på søylene
hc_legend(enabled = FALSE)  # Fjerner legend

# Tabell om nødvendig
#kable(otg_skjenk)


```

Det var `r sum(kfa_oppdatert$q2_11 == "Ja", na.rm = TRUE)` kommuner som rapporterte overtredelser knyttet til skjenkebevillinger i 2024.Totalt ble det avdekket `r sum(kfa_oppdatert$otg_skjenk24, na.rm = TRUE)` overtredelser knyttet til skjenkebevillinger. Fordelingen av de ulike overtredelsene vises under.

`r highchart() %>% hc_chart(type = "bar") %>% hc_title(text = "Overtredelser knyttet til salgsbevillinger") %>% hc_xAxis(categories = otg_skjenk$name) %>% hc_add_series(name = "", data = otg_skjenk$y, colorByPoint = TRUE) %>% hc_colors(hdir_color) %>% hc_plotOptions(bar = list(dataLabels = list(enabled = TRUE))) %>% hc_legend(enabled = FALSE)`

## Inndragninger av bevillinger

-   Salg, permanent: `r sum(kfa_oppdatert$q1_7_1, na.rm = TRUE)`.
-   Salg, midlertidig: `r sum(kfa_oppdatert$q1_8_1, na.rm = TRUE)`.
-   Skjenke, permanent: `r sum(kfa_oppdatert$q2_12_1, na.rm = TRUE)`.
-   Skjenke, midlertidig: `r sum(kfa_oppdatert$q2_13_1, na.rm = TRUE)`.

```{r}
#| message: false
#| echo: false


```

# Kommunens alkoholpolitikk og saksbehandling

I spørsmål om kommunen har utarbeidet alkoholpolitisk handlingsplan (eller liknende føringer for alkoholpolitikken, for eksempel retningslinjer), sier `r round ((((sum(kfa_oppdatert$q4_3 == "Ja", na.rm = TRUE))/(sum(kfa_oppdatert$q4_3 == "Ja" | kfa_oppdatert$q4_3 == "Nei", na.rm = TRUE)))*100),1)` % av kommunene at de gjør dette (n=`r sum(kfa_oppdatert$q4_3 == "Ja", na.rm = TRUE)`).

```{r}
#| message: false
#| echo: false
#| output: false

# Utarbeidet alkoholpolitiske handlingsplan (eller liknende føringer for alkoholpolitikken)
table(kfa_oppdatert$q4_3)

sum(kfa_oppdatert$q4_3 == "Ja", na.rm = TRUE)
sum(kfa_oppdatert$q4_3 == "Ja" | kfa_oppdatert$q4_3 == "Nei", na.rm = TRUE)

# Opplevde største utfordringene i saksbehandlingen

kfa_oppdatert <- as.data.frame(kfa_oppdatert)

# Lage firgur med utfordringer

utfordringer_data <- data.frame(
  utfordringer = c(
  "Innhenting av uttalelser fra høringsinstansene", 
  "Manglende saksbehandlingssystem/fagsystem", 
  "Registrering av bevillinger i Tobakksalgs- og bevillingsregisteret (TBR)", 
  "Spørsmål fra bevillingssøker",
  "Vandelsvurdering", 
  "Mangel på tilgjengelig veiledning og informasjon om regelverket", 
  "Komplisert regelverk", 
  "Annet",
  "Ikke noe"
  ),
  Antall_U = c(
  sum(kfa_oppdatert$q5_1_1 == "Innhenting av uttalelser fra høringsinstansene", na.rm = TRUE),
  sum(kfa_oppdatert$q5_1_2 == "Manglende saksbehandlingssystem/fagsystem", na.rm = TRUE),
  sum(kfa_oppdatert$q5_1_3 == "Registrering av bevillinger i Tobakksalgs- og bevillingsregisteret (TBR)", na.rm = TRUE),
  sum(kfa_oppdatert$q5_1_4 == "Spørsmål fra bevillingssøker", na.rm = TRUE),
  sum(kfa_oppdatert$q5_1_5 == "Vandelsvurdering", na.rm = TRUE),
  sum(kfa_oppdatert$q5_1_6 == "Mangel på tilgjengelig veiledning og informasjon om regelverket", na.rm = TRUE),
  sum(kfa_oppdatert$q5_1_7 == "Komplisert regelverk", na.rm = TRUE),
  sum(kfa_oppdatert$q5_1_8 == "Annet", na.rm = TRUE),
  sum(kfa_oppdatert$q5_1_9 == "Ikke noe", na.rm = TRUE)
)
)

highchart() %>%
  hc_chart(type = "column") %>%
  hc_title(text = "Opplevde største utfordringer i saksbehandlingen etter alkoholloven") %>%
  hc_xAxis(categories = utfordringer_data$utfordringer) %>%
  hc_yAxis(title = list(text = "")) %>%
  hc_series(list(
    name = "Antall kommuner",
    data = utfordringer_data$Antall_U,
    color = "#025169"
  )) %>%
  hc_plotOptions(column = list(dataLabels = list(enabled = TRUE)))

# Antall kommune som har rapportert opplevd stfordringer i saksbhenalding.


```

## Opplevde største utfordringene i saksbehandlingen

Figur under viser de opplevde største utfordrignene i saksbehandlingene etter alkoholloven. `r highchart() %>% hc_chart(type = "column") %>% hc_title(text = "Opplevde største utfordringer i saksbehandlingen etter alkoholloven") %>% hc_xAxis(categories = utfordringer_data$utfordringer) %>% hc_yAxis(title = list(text = "Antall kommuner")) %>% hc_series(list(name = "Antall kommuner", data = utfordringer_data$Antall_U, color = "#025169" )) %>% hc_plotOptions(column = list(dataLabels = list(enabled = TRUE)))`

## Veildning ifm saksbehandling av salgs- og skjenkebevillinger

Det var `r sum(kfa_oppdatert$q5_2 == "Ja", na.rm = TRUE)` av kommunene som rapporterte at de hadde mottatt veildning i 2024. Videre rapporterer disse å få veiledning fra ulike aktører, se under.

```{r}
#| message: false
#| echo: false
#| output: false

# Veildning ifm saksbehandling av salgs- og skjenkebevillinger

# Antall kommuner som har vilkår knytte ttil noen av skjenkebevillingene:
table(kfa_oppdatert$q5_2)
  # antall kommuner med veildning:
sum(kfa_oppdatert$q5_2 == "Ja", na.rm = TRUE)

# Hvem kommunene fikk veiledning fra:

kfa_oppdatert <- as.data.frame(kfa_oppdatert)

# Lage firgur med utfordringer

veiledning_data <- data.frame(
  veiledning = c(
  "Statsforvalter", 
  "Annen kommune", 
  "KORUS", 
  "Kommunalt alkoholfaglig saksbehandlerforum (KAS)",
  "Annet"
  ),
  Antall_v = c(
  sum(kfa_oppdatert$q5_2a_1 == "Statsforvalter", na.rm = TRUE),
  sum(kfa_oppdatert$q5_2a_2 == "Annen kommune", na.rm = TRUE),
  sum(kfa_oppdatert$q5_2a_3 == "KORUS", na.rm = TRUE),
  sum(kfa_oppdatert$q5_2a_4 == "Kommunalt alkoholfaglig saksbehandlerforum (KAS)", na.rm = TRUE),
  sum(kfa_oppdatert$q5_2a_5 == "Annet", na.rm = TRUE)
)
)

highchart() %>%
  hc_chart(type = "column") %>%
  hc_title(text = "Kommunene har fått veiledning fra...") %>%
  hc_xAxis(categories = veiledning_data$veiledning) %>%
  hc_yAxis(title = list(text = "")) %>%
  hc_series(list(
    name = "Antall kommuner",
    data = veiledning_data$Antall_v,
    color = "#025169"
  )) %>%
  hc_plotOptions(column = list(dataLabels = list(enabled = TRUE)))


```

`r highchart() %>% hc_chart(type = "column") %>% hc_title(text = "Kommunene har fått veiledning fra...") %>% hc_xAxis(categories = veiledning_data$veiledning) %>% hc_yAxis(title = list(text = "")) %>% hc_series(list( name = "Antall kommuner", data = veiledning_data$Antall_v, color = "#025169")) %>% hc_plotOptions(column = list(dataLabels = list(enabled = TRUE)))`

```{r}
#| message: false
#| echo: false
#| output: false

```

```{r}
#| message: false
#| echo: false
#| output: false



```

# Kodebok KFA 2024_2025

<table>
<thead>
<tr>
<th><p>Org. variabelnavn 2025</p></th>
<th><p>Forklaring / spørsmål</p></th>
<th><p>Svaralternativ</p></th>
<th><p>Nytt variabelnavn</p></th>
<th><p>Kommentar</p></th>
<th><p></p></th>
<th><p></p></th>
</tr>
</thead>
<tbody>
<tr>
<td><p>respid</p></td>
<td><p>Respondent Id</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>kommune</p></td>
<td><p>kommune</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>kommunenummer</p></td>
<td><p>kommunenummer</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>qintro_2_1_1</p></td>
<td><p>Fyll inn opplysninger om den som fyller ut skjemaet: Navn:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>qintro_2_1_2</p></td>
<td><p>Fyll inn opplysninger om den som fyller ut skjemaet: Telefonnummer:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>qintro_2_1_3</p></td>
<td><p>Fyll inn opplysninger om den som fyller ut skjemaet: E-post:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>qintro_2_1_4</p></td>
<td><p>Fyll inn opplysninger om den som fyller ut skjemaet: Stilling i kommunen:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_1_1</p></td>
<td><p>Hvor mange salgsbevillinger for salg av øl/rusbrus (alkoholholdig drikk gruppe 1) fantes det i kommunen per 31.12.2024? Dagligvarebutikk</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_1_2</p></td>
<td><p>Hvor mange salgsbevillinger for salg av øl/rusbrus (alkoholholdig drikk gruppe 1) fantes det i kommunen per 31.12.2024? Bryggeri</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_1_3</p></td>
<td><p>Hvor mange salgsbevillinger for salg av øl/rusbrus (alkoholholdig drikk gruppe 1) fantes det i kommunen per 31.12.2024? Gårdsutsalg</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_1_4</p></td>
<td><p>Hvor mange salgsbevillinger for salg av øl/rusbrus (alkoholholdig drikk gruppe 1) fantes det i kommunen per 31.12.2024? Nettsalg</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_1_5</p></td>
<td><p>Hvor mange salgsbevillinger for salg av øl/rusbrus (alkoholholdig drikk gruppe 1) fantes det i kommunen per 31.12.2024? Øl- og mineralvannutsalg</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_1_6</p></td>
<td><p>Hvor mange salgsbevillinger for salg av øl/rusbrus (alkoholholdig drikk gruppe 1) fantes det i kommunen per 31.12.2024? Kultur (museum-/festivalutsalg)</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_1_7</p></td>
<td><p>Hvor mange salgsbevillinger for salg av øl/rusbrus (alkoholholdig drikk gruppe 1) fantes det i kommunen per 31.12.2024? Andre typer salgssted (gjelder ikke vinmonopol)</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_1_sum</p></td>
<td><p>Totalt antall salgsbevillinger</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_3a_1</p></td>
<td><p>Hva var maksimaltiden for salg av øl/rusbrus (alkoholholdig drikk gruppe 1) ved utgangen av 2024? Hverdager til kl.:</p></td>
<td><p>1: 18.00<br />
2: 19.00<br />
3: 20.00</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_3a_2</p></td>
<td><p>Hva var maksimaltiden for salg av øl/rusbrus (alkoholholdig drikk gruppe 1) ved utgangen av 2024? Lørdager til kl.:</p></td>
<td><p>1: 15.00<br />
2: 16.00<br />
3: 17.00<br />
4: 18.00</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_3b</p></td>
<td><p>For hvor mange av salgsbevillingene gjaldt maksimaltiden?</p></td>
<td><p>1: Samtlige<br />
2: Hvis ikke samtlige, oppgi antall bevillinger med maksimaltid</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_3b_2_other</p></td>
<td><p>For hvor mange av salgsbevillingene gjaldt maksimaltiden? Hvis ikke samtlige, oppgiantall bevillinger med maksimaltid:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_4</p></td>
<td><p>Hvem utførte salgskontroll i 2024?</p></td>
<td><p>1: Kommunalt ansatte kontrollører (egen kommune)<br />
2: Vaktselskap/Annet privat selskap<br />
3: Interkommunalt samarbeid om kontroll/kontroll utføres av annen kommune<br />
4: Kontrollen er ordnet på annen måte</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_5</p></td>
<td><p>Hvor mange salgskontroller ble utført i 2024? Antall:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6</p></td>
<td><p>Var det overtredelser av alkoholloven knyttet til salgsbevilling(er) i 2024?</p></td>
<td><p>1: Ja<br />
2: Nei</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6a_1_1</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Salg til mindreårige</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6a_1_2</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Brudd på kravet om forsvarlig drift</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6a_1_3</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Hindring av kontroll</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6a_1_4</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Salg til åpenbart påvirket person</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6a_1_5</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Brudd på tidsbestemmelsene</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6a_1_6</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Brudd på reklamebestemmelsene</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6a_1_7</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Brudd på alderskrav til den som selger alkohol</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6a_1_8</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Mangler ved internkontrollen</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6a_1_9</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Brudd på regler om styrer og stedfortreder</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6a_1_10</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Brudd på reglene om plassering av alkoholholdig drikk på salgsstedet</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6a_1_11</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Brudd på vilkår i bevillingsvedtaket</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6a_1_12</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Manglende levering av omsetningsoppgave innen kommunens frist</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6a_1_13</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Manglende betaling av bevillingsgebyr innen kommunens frist</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6a_1_14</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Omsetning med rabatt</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6a_1_15</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Ubetjent salg</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6a_1_16</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Annen type overtredelse</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6c_1</p></td>
<td><p>Hva er årsaken til at det ikke var noen overtredelser? Ingen overtredelser avdekket i kontroll</p></td>
<td><p>0: Not answered<br />
1: Ingen overtredelser avdekket i kontroll</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6c_2</p></td>
<td><p>Hva er årsaken til at det ikke var noen overtredelser? Kommunen har ikke gjennomført kontroll / manglet ressurser til kontroll</p></td>
<td><p>0: Not answered<br />
2: Kommunen har ikke gjennomført kontroll / manglet ressurser til kontroll</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6c_3</p></td>
<td><p>Hva er årsaken til at det ikke var noen overtredelser? Prioritert annen veiledning overfor bevillingshaver</p></td>
<td><p>0: Not answered<br />
1: Prioritert annen veiledning overfor bevillingshaver</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_6c_4</p></td>
<td><p>Hva er årsaken til at det ikke var noen overtredelser? Annet</p></td>
<td><p>0: Not answered<br />
1: Annet</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_7</p></td>
<td><p>Ble det permanent inndratt salgsbevillinger i løpet av 2024?</p></td>
<td><p>1: Ja<br />
2: Nei</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_7_1</p></td>
<td><p>Hvor mange salgsbevillinger ble permanent inndratt? Antall:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_8</p></td>
<td><p>Ble det midlertidig inndratt salgsbevillinger i løpet av 2024?</p></td>
<td><p>1: Ja<br />
2: Nei</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_8_1</p></td>
<td><p>Hvor mange salgsbevillinger ble midlertidig inndratt? Antall:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_9</p></td>
<td><p>Ble inndragningsvedtak av salgsbevilling påklaget av bevillingshaver i 2024?</p></td>
<td><p>1: Ja<br />
2: Nei<br />
3: Ikke aktuelt</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_9_1</p></td>
<td><p>Hvor mange ble påklaget? Antall:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_10</p></td>
<td><p>Ble det formelt klaget på tildeling av prikker til salgssteder i løpet av 2024?</p></td>
<td><p>1: Ja<br />
2: Nei<br />
3: Ikke aktuelt</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_10_1</p></td>
<td><p>Hvor mange klager ble meldt inn? Antall:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_11</p></td>
<td><p>Ble det i 2024 lagt frem forslag om inndragning av salgsbevilling(er) som kommunestyret/bystyret avviste?</p></td>
<td><p>1: Ja<br />
2: Nei</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_11_1</p></td>
<td><p>Hvor mange ganger skjedde det? Antall:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_11_1_open</p></td>
<td><p>Grunn til avvisning:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_12a</p></td>
<td><p>Har det i 2024 vært skjerpende omstendigheter ved brudd på alkoholloven ved salgssteder som førte til at det ble tildelt flere prikker enn det som følger av alkoholforskriftens kapittel 10?</p></td>
<td><p>1: Ja<br />
2: Nei<br />
3: Ikke aktuelt</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_12b</p></td>
<td><p>Har det i 2024 vært formildende omstendigheter ved brudd på alkoholloven ved salgssteder som førte til at det ble tildelt færre prikker enn det som følger av alkoholforskriftens kapittel 10?</p></td>
<td><p>1: Ja<br />
2: Nei<br />
3: Ikke aktuelt</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_13a_1</p></td>
<td><p>Hvor mange søknader om ny salgsbevilling ble innvilget og hvor mange ble avslått i 2024? Antall innvilget</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_13a_2</p></td>
<td><p>Hvor mange søknader om ny salgsbevilling ble innvilget og hvor mange ble avslått i 2024? Antall avslått</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_13b_1</p></td>
<td><p>Hva var grunnen(e) til eventuelle avslag? Oppfylte ikke vandelskravet</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_13b_2</p></td>
<td><p>Hva var grunnen(e) til eventuelle avslag? Kommunens lokalpolitiske hensyn</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_13b_3</p></td>
<td><p>Hva var grunnen(e) til eventuelle avslag? Manglende dokumentasjon fra søker</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q1_13b_4</p></td>
<td><p>Hva var grunnen(e) til eventuelle avslag? Andre grunner</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_1_1</p></td>
<td><p>Hvor mange kommunale skjenkebevillinger fantes det i kommunen per 31.12.2024? Antall skjenkebevillinger kun for øl/rusbrus (alkoholholdig drikk gruppe 1)</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_1_2</p></td>
<td><p>Hvor mange kommunale skjenkebevillinger fantes det i kommunen per 31.12.2024? Antall skjenkebevillinger kun for øl/rusbrus og vin (alkoholholdig drikk gruppe 1 og 2)</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_1_3</p></td>
<td><p>Hvor mange kommunale skjenkebevillinger fantes det i kommunen per 31.12.2024? Antall skjenkebevillinger for øl/rusbrus, vin og brennevin (alkoholholdig drikk gruppe 1, 2 og 3)</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_1_sum</p></td>
<td><p>Totalt antall skjenkebevillinger</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_2</p></td>
<td><p>Hadde kommunen bevillinger til skjenking av alkohol på andre steder enn barer, diskotek, klubber, kafér og restauranter i 2024?</p></td>
<td><p>1: Ja<br />
2: Nei</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_2_1_1</p></td>
<td><p>Fyll inn antall. Alders- og sykehjem / eldresenter el. liknende</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_2_1_2</p></td>
<td><p>Fyll inn antall. Transportmidler (eks. båt)</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_2_1_3</p></td>
<td><p>Fyll inn antall. Idrettsarena (utendørs og innendørs)</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_2_1_4</p></td>
<td><p>Fyll inn antall. Kantiner</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_2_1_5</p></td>
<td><p>Fyll inn antall. Turisthytter</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_2_1_6</p></td>
<td><p>Fyll inn antall. Kultur (kino, museer, konserthus, bibliotek)</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_2_1_7</p></td>
<td><p>Fyll inn antall. Frisør/spa og velvære</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_2_1_8</p></td>
<td><p>Fyll inn antall. Opplevelsessenter</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_2_1_9</p></td>
<td><p>Fyll inn antall. Selskapslokaler</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_2_1_10</p></td>
<td><p>Fyll inn antall. Klær-/sko-/interiørbutikker el. liknende</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_2_1_11</p></td>
<td><p>Fyll inn antall. Festival</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_2_1_12</p></td>
<td><p>Fyll inn antall. Annet</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_3</p></td>
<td><p>Hvor mange skjenkebevillinger for en enkelt anledning og/eller ambulerende skjenkebevillinger ble det gitt i 2024? Antall:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_5</p></td>
<td><p>Var det knyttet vilkår til noen av skjenkebevillingene i 2024?</p></td>
<td><p>1: Ja<br />
2: Nei</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_5_1_1</p></td>
<td><p>Ble noen av følgende vilkår benyttet (flere svar mulig)? Ordensvakter på stedet</p></td>
<td><p>0: Not answered<br />
1: Ordensvakter på stedet</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_5_1_2</p></td>
<td><p>Ble noen av følgende vilkår benyttet (flere svar mulig)? Kursing av ansatte (eks. Ansvarlig Vertskap e-læringskurs )</p></td>
<td><p>0: Not answered<br />
1: Kursing av ansatte (eks. Ansvarlig Vertskap e-læringskurs)</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_5_1_3</p></td>
<td><p>Ble noen av følgende vilkår benyttet (flere svar mulig)? Nedre aldersgrense</p></td>
<td><p>0: Not answered<br />
1: Nedre aldersgrense</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_5_1_4</p></td>
<td><p>Ble noen av følgende vilkår benyttet (flere svar mulig)? Matservering</p></td>
<td><p>0: Not answered<br />
1: Matservering</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_5_1_5</p></td>
<td><p>Ble noen av følgende vilkår benyttet (flere svar mulig)? Begrensning i skjenketid</p></td>
<td><p>0: Not answered<br />
1: Begrensning i skjenketid</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_5_1_6</p></td>
<td><p>Ble noen av følgende vilkår benyttet (flere svar mulig)? Annet</p></td>
<td><p>0: Not answered<br />
1: Annet</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_5_1_7</p></td>
<td><p>Ble noen av følgende vilkår benyttet (flere svar mulig)? Ingen vilkår ble benyttet</p></td>
<td><p>0: Not answered<br />
1: Ingen vilkår ble benyttet</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_6a</p></td>
<td><p>Hva var maksimaltiden for skjenking av øl/rusbrus og vin (alkoholholdig drikk gruppe 1 og 2) ved utgangen av 2024?</p></td>
<td><p>1: 00.00<br />
2: 00.30<br />
3: 01.00<br />
4: 01.30<br />
5: 02.00<br />
6: 02.30<br />
7: 03.00</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_6b</p></td>
<td><p>Hvor mange av bevillingene gir anledning til å skjenke til maksimaltiden?</p></td>
<td><p>1: Samtlige<br />
2: Hvis ikke samtlige, oppgi antall bevillinger med maksimaltid</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_6b_2_other</p></td>
<td><p>Hvor mange av bevillingene gir anledning til å skjenke til maksimaltiden? Hvis ikke samtlige, oppgiantall bevillinger medmaksimaltid:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_7a</p></td>
<td><p>Hva var maksimaltiden for skjenking av brennevin (alkoholholdig drikk gruppe 3) ved utgangen av 2024?</p></td>
<td><p>1: 00.00<br />
2: 00.30<br />
3: 01.00<br />
4: 01.30<br />
5: 02.00<br />
6: 02.30<br />
7: 03.00</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_7b</p></td>
<td><p>Hvor mange av bevillingene gir anledning til å skjenke til maksimaltiden?</p></td>
<td><p>1: Samtlige<br />
2: Hvis ikke samtlige, oppgi antall bevillinger med maksimaltid</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_7b_2_other</p></td>
<td><p>Hvor mange av bevillingene gir anledning til å skjenke til maksimaltiden? Hvis ikke samtlige, oppgiantall bevillinger medmaksimaltid:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_8a_1</p></td>
<td><p>Hvor mange søknader om ny skjenkebevilling ble innvilget og hvor mange ble avslått i 2024? Antall innvilget</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_8a_2</p></td>
<td><p>Hvor mange søknader om ny skjenkebevilling ble innvilget og hvor mange ble avslått i 2024? Antall avslått</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_8b_1_1</p></td>
<td><p>Hva var grunnen(e) til eventuelle avslag? Oppfylte ikke vandelskravet</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_8b_1_2</p></td>
<td><p>Hva var grunnen(e) til eventuelle avslag? Kommunens lokalpolitiske hensyn</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_8b_1_3</p></td>
<td><p>Hva var grunnen(e) til eventuelle avslag? Manglende dokumentasjon fra søker</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_8b_1_4</p></td>
<td><p>Hva var grunnen(e) til eventuelle avslag? Manglende godkjenning fra andre offentlige myndigheter</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_8b_1_5</p></td>
<td><p>Hva var grunnen(e) til eventuelle avslag? Andre grunner</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_9</p></td>
<td><p>Hvem utførte skjenkekontroll i 2024?</p></td>
<td><p>1: Kommunalt ansatte kontrollører (egen kommune)<br />
2: Vaktselskap / annet privat selskap<br />
3: Interkommunalt samarbeid om kontroll / kontroll utføres av annen kommune<br />
4: Kontrollen er ordnet på annen måte</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_10</p></td>
<td><p>Hvor mange skjenkekontroller ble utført i 2024? Antall:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11</p></td>
<td><p>Var det overtredelser av alkoholloven knyttet til skjenkested(er) i 2024?</p></td>
<td><p>1: Ja<br />
2: Nei</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_1</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Skjenking til mindreårige</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_2</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Brudd på bistandsplikten</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_3</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Brudd på kravet om forsvarlig drift</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_4</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Hindring av kontroll</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_5</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Skjenking til åpenbart påvirket person</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_6</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Brudd på tidsbestemmelsene</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_7</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Brudd på reklamebestemmelsene</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_8</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Skjenking av sprit til person mellom 18 og 20 år</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_9</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Brudd på alderskrav til den som skjenker alkohol</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_10</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Åpenbart påvirket person i lokalet</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_11</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Mangler ved internkontrollsystemet</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_12</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Brudd på regler om styrer og stedfortreder</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_13</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Gjentatt diskriminering</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_14</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Gjentatt narkotikaomsetning</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_15</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Brudd på reglene om alkoholfrie alternativer</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_16</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Brudd på reglene om plassering av alkoholholdig drikk på skjenkestedet</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_17</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Brudd på reglene om skjenkemengde for brennevin</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_18</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Brudd på vilkår i bevillingsvedtaket</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_19</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Konsum av medbrakt alkohol</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_20</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Gjester tar med alkohol ut</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_21</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Manglende levering av omsetningsoppgave innen kommunens frist</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_22</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Manglende betaling av bevillingsgebyr innen kommunens frist</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_11a_1_23</p></td>
<td><p>Hvilke type(r) overtredelse(r) var det? Oppgi antall. Annen type overtredelse</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_12</p></td>
<td><p>Ble det permanent inndratt skjenkebevillinger?</p></td>
<td><p>1: Ja<br />
2: Nei</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_12_1</p></td>
<td><p>Hvor mange skjenkebevillinger ble permanent indratt? Antall:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_13</p></td>
<td><p>Ble det midlertidig inndratt salgsbevillinger i løpet av 2024?</p></td>
<td><p>1: Ja<br />
2: Nei</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_13_1</p></td>
<td><p>Hvor mange skjenkebevillinger ble midlertidig indratt? Antall:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_14</p></td>
<td><p>Ble inndragningsvedtak av skjenkebevilling påklaget av bevillingshaver i 2024?</p></td>
<td><p>1: Ja<br />
2: Nei<br />
3: Ikke aktuelt</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_14_1</p></td>
<td><p>Hvor mange ble påklaget? Antall:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_15</p></td>
<td><p>Ble det formelt klaget på tildeling av prikker til skjenkesteder i løpet av 2024?</p></td>
<td><p>1: Ja<br />
2: Nei<br />
3: Ikke aktuelt</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_15_1</p></td>
<td><p>Hvor mange klager ble meldt inn? Antall:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_16</p></td>
<td><p>Ble det i 2024 lagt frem forslag om inndragning av skjenkebevilling(er) som kommunestyret/bystyret avviste?</p></td>
<td><p>1: Ja<br />
2: Nei</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_16_1</p></td>
<td><p>Hvor mange ganger skjedde det? Antall:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_16_1_open</p></td>
<td><p>Grunn til avvisning:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_17a</p></td>
<td><p>Har det i 2024 vært formildende omstendigheter ved brudd på alkoholloven ved skjenkesteder som førte til at det ble tildelt færre prikker enn det som følger av alkoholforskriftens kapittel 10?</p></td>
<td><p>1: Ja<br />
2: Nei<br />
3: Ikke aktuelt</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q2_17b</p></td>
<td><p>Har det i 2024 vært skjerpende omstendigheter ved brudd på alkoholloven ved skjenkesteder som førte til at det ble tildelt flere prikker enn det som følger av alkoholforskriftens kapittel 10?</p></td>
<td><p>1: Ja<br />
2: Nei<br />
3: Ikke aktuelt</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q3_1_1</p></td>
<td><p>Hvor mange liter alkohol ble solgt og skjenket i 2024? Solgt øl og rusbrus (alkohol gruppe 1)</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q3_1_2</p></td>
<td><p>Hvor mange liter alkohol ble solgt og skjenket i 2024? Skjenket øl og rusbrus (alkohol gruppe 1)</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q3_1_3</p></td>
<td><p>Hvor mange liter alkohol ble solgt og skjenket i 2024? Skjenket vin (alkohol gruppe 2)</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q3_1_4</p></td>
<td><p>Hvor mange liter alkohol ble solgt og skjenket i 2024? Skjenket brennevin (alkohol gruppe 3)</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q4_1</p></td>
<td><p>Hvordan har kommunen valgt å gjennomføre fornyelse av salgs- og skjenkebevillinger i 2025? (ett svar mulig)</p></td>
<td><p>1: Alle må søke om fornyelse<br />
2: Ingen må søke om fornyelse<br />
3: Noen må søke om fornyelse of det er/blir satt kriterier for hvilke bevillinger dette gjelder<br />
4: Alle eller en del av bevillingene løper videre med nye eller endrede vilkår</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q4_2</p></td>
<td><p>Har kommunen gjennomgått alkoholpolitikken og vurdert bevillingspolitikken etter kommunevalget i 2024?</p></td>
<td><p>1: Ja<br />
2: Nei</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q4_2a</p></td>
<td><p>Begrunnelse for at bevillingspolitikken ikke er vurdert etter kommunevalget 2024:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q4_3</p></td>
<td><p>Har kommunen utarbeidet alkoholpolitisk handlingsplan (eller liknende føringer for alkoholpolitikken, for eksempel retningslinjer)?</p></td>
<td><p>1: Ja<br />
2: Nei</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q5_1_1</p></td>
<td><p>Hva opplever kommunen som de største utfordringene i saksbehandlingen etter alkoholloven? (flere svar mulig) Innhenting av uttalelser fra høringsinstansene</p></td>
<td><p>0: Not answered<br />
1: Innhenting av uttalelser fra høringsinstansene</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q5_1_2</p></td>
<td><p>Hva opplever kommunen som de største utfordringene i saksbehandlingen etter alkoholloven? (flere svar mulig) Manglende saksbehandlingssystem/fagsystem</p></td>
<td><p>0: Not answered<br />
1: Manglende saksbehandlingssystem / fagsystem</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q5_1_3</p></td>
<td><p>Hva opplever kommunen som de største utfordringene i saksbehandlingen etter alkoholloven? (flere svar mulig) Registrering av bevillinger i Tobakksalgs- og bevillingsregisteret (TBR)</p></td>
<td><p>0: Not answered<br />
1: Registrering av bevillinger i TBR</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q5_1_4</p></td>
<td><p>Hva opplever kommunen som de største utfordringene i saksbehandlingen etter alkoholloven? (flere svar mulig) Spørsmål fra bevillingssøker</p></td>
<td><p>0: Not answered<br />
1: Spørsmål fra bevillingssøker</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q5_1_5</p></td>
<td><p>Hva opplever kommunen som de største utfordringene i saksbehandlingen etter alkoholloven? (flere svar mulig) Vandelsvurdering</p></td>
<td><p>0: Not answered<br />
1: Vandelsvurdering</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q5_1_6</p></td>
<td><p>Hva opplever kommunen som de største utfordringene i saksbehandlingen etter alkoholloven? (flere svar mulig) Mangel på tilgjengelig veiledning og informasjon om regelverket</p></td>
<td><p>0: Not answered<br />
1: Mangel på tilgjengelig veiledning og informasjon om regelverket</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q5_1_7</p></td>
<td><p>Hva opplever kommunen som de største utfordringene i saksbehandlingen etter alkoholloven? (flere svar mulig) Komplisert regelverk</p></td>
<td><p>0: Not answered<br />
1: Komplisert regelverk</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q5_1_8</p></td>
<td><p>Hva opplever kommunen som de største utfordringene i saksbehandlingen etter alkoholloven? (flere svar mulig) Annet</p></td>
<td><p>0: Not answered<br />
1: Annet</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q5_1_9</p></td>
<td><p>Hva opplever kommunen som de største utfordringene i saksbehandlingen etter alkoholloven? (flere svar mulig) Ikke noe</p></td>
<td><p>0: Not answered<br />
1: Ikke noe</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q5_2</p></td>
<td><p>Har kommunen mottatt veiledning i 2024?</p></td>
<td><p>1: Ja<br />
2: Nei</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q5_2a_1</p></td>
<td><p>Hvem fikk kommunen veiledning fra? (flere svar mulig) Statsforvalter</p></td>
<td><p>0: Not answered<br />
1: Statsforvalter</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q5_2a_2</p></td>
<td><p>Hvem fikk kommunen veiledning fra? (flere svar mulig) Annen kommune</p></td>
<td><p>0: Not answered<br />
1: Annen kommune</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q5_2a_3</p></td>
<td><p>Hvem fikk kommunen veiledning fra? (flere svar mulig) KORUS</p></td>
<td><p>0: Not answered<br />
1: KORUS</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q5_2a_4</p></td>
<td><p>Hvem fikk kommunen veiledning fra? (flere svar mulig) Kommunalt alkoholfaglig saksbehandlerforum (KAS)</p></td>
<td><p>0: Not answered<br />
1: Komunalt alkoholfaglig saksbehandlerforum (KAS)</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q5_2a_5</p></td>
<td><p>Hvem fikk kommunen veiledning fra? (flere svar mulig) Annet</p></td>
<td><p>0: Not answered<br />
1: Annet</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>q5_3</p></td>
<td><p>Registrerer kommunen bevillinger i TBR, jf. alkoholforskriften § 13-3?</p></td>
<td><p>1: Ja<br />
2: Nei</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><p>s1</p></td>
<td><p>Har du kommentarer til undersøkelsen eller til noen av opplysningene som er oppgitt? Skriv inn:</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
